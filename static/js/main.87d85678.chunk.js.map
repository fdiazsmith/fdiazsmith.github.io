{"version":3,"sources":["components/Globe/lib/Tween.js","components/Colors.js","components/Globe/lib/OrbitControlsVista.js","components/Globe/Geographer.js","components/Globe/Earth.js","components/Globe/Location.js","components/Globe/Cursor.js","components/Globe/ZoomBar/index.jsx","components/Globe/index.jsx","components/Filter/Picker.jsx","components/Filter/index.jsx","components/Company/Nodes.jsx","gtm.js","components/Company/OtherLocations.jsx","components/Company/AddOnCompanies.jsx","components/Company/Card.jsx","components/Company/index.jsx","components/List/index.jsx","components/Instructions/index.jsx","components/Disclosure/index.jsx","index.js"],"names":["process","_Group","this","_tweens","_tweensAddedDuringUpdate","prototype","getAll","Object","keys","map","tweenId","bind","removeAll","add","tween","getId","remove","update","time","preserve","tweenIds","length","undefined","TWEEN","now","i","_isPlaying","Group","_nextId","nextId","window","self","hrtime","performance","Date","getTime","Tween","object","group","_object","_valuesStart","_valuesEnd","_valuesStartRepeat","_duration","_repeat","_repeatDelayTime","_yoyo","_reversed","_delayTime","_startTime","_easingFunction","Easing","Linear","None","_interpolationFunction","Interpolation","_chainedTweens","_onStartCallback","_onStartCallbackFired","_onUpdateCallback","_onRepeatCallback","_onCompleteCallback","_onStopCallback","_group","_id","isPlaying","to","properties","duration","create","d","start","property","parseFloat","Array","concat","stop","stopChainedTweens","end","Infinity","numChainedTweens","delay","amount","repeat","times","repeatDelay","yoyo","easing","easingFunction","interpolation","interpolationFunction","chain","arguments","onStart","callback","onUpdate","onRepeat","onComplete","onStop","elapsed","value","charAt","isFinite","tmp","k","Quadratic","In","Out","InOut","Cubic","Quartic","Quintic","Sinusoidal","Math","cos","PI","sin","Exponential","pow","Circular","sqrt","Elastic","Back","s","Bounce","v","m","f","floor","fn","Utils","Bezier","b","n","pw","bn","Bernstein","CatmullRom","p0","p1","t","fc","Factorial","a","p2","p3","v0","v1","t2","Colors","verticals","Horizontal","Nonprofit","Education","Energy","Government","Agriculture","Healthcare","Insurance","Legal","HR & Recruiting","Managed Services","Financial Services","Sales & Marketing","Retail","Hospitality","Real Estate","Sports, Media & Entertainment","Security","Telecom","Automotive","Transportation","Vista","grays","Level_1","Level_2","Level_3","Level_4","general","Dark_Blue","White","_OrbitControls","domElement","sphere","document","enabled","target","THREE","minDistance","maxDistance","minZoom","maxZoom","minPolarAngle","maxPolarAngle","minAzimuthAngle","maxAzimuthAngle","enableDamping","dampingFactor","enableZoom","zoomSpeed","enableRotate","rotateSpeed","enablePan","panSpeed","screenSpacePanning","keyPanSpeed","autoRotate","autoRotateSpeed","enableKeys","LEFT","UP","RIGHT","BOTTOM","mouseButtons","MIDDLE","target0","clone","position0","position","zoom0","zoom","getPolarAngle","spherical","phi","getAzimuthalAngle","theta","saveState","scope","copy","reset","updateProjectionMatrix","dispatchEvent","changeEvent","state","STATE","NONE","offset","quat","setFromUnitVectors","up","quatInverse","inverse","lastPosition","lastQuaternion","sub","applyQuaternion","setFromVector3","rotateLeft","sphericalDelta","max","min","makeSafe","radius","scale","panOffset","setFromSpherical","lookAt","multiplyScalar","set","zoomChanged","distanceToSquared","EPS","dot","quaternion","dispose","removeEventListener","onContextMenu","onMouseDown","onMouseWheel","onTouchStart","onTouchEnd","onTouchMove","onMouseMove","onMouseUp","onKeyDown","getState","zoomBar","dir","dollyOut","getZoomScale","dollyIn","getZoomPercent","getScale","isPerspectiveCamera","isOrthographicCamera","type","startEvent","endEvent","ROTATE","DOLLY","PAN","TOUCH_ROTATE","TOUCH_DOLLY_PAN","rotateStart","rotateEnd","rotateDelta","panStart","panEnd","panDelta","dollyStart","dollyEnd","dollyDelta","angle","rotateUp","panLeft","distance","objectMatrix","setFromMatrixColumn","panUp","crossVectors","pan","deltaX","deltaY","element","body","targetDistance","tan","fov","clientHeight","matrix","right","left","clientWidth","top","bottom","console","warn","dollyScale","handleMouseDownPan","event","clientX","clientY","preventDefault","button","ctrlKey","metaKey","handleMouseDownRotate","handleMouseDownDolly","addEventListener","subVectors","x","y","handleMouseMoveRotate","handleMouseMoveDolly","handleMouseMovePan","stopPropagation","log","handleMouseWheel","keyCode","handleKeyDown","touches","pageX","pageY","handleTouchStartRotate","dx","dy","handleTouchStartDollyPan","handleTouchMoveRotate","handleTouchMoveDollyPan","constructor","OrbitControls","defineProperties","center","get","noZoom","noRotate","noPan","noKeys","staticMoving","dynamicDampingFactor","DEBUG","getPoint","_ref","face","geometry","vertices","c","z","longLatToVect3","point","_r","lambda","cosPhi","wireframe","multilinestring","material","_radius","coordinates","forEach","line","d3","push","getEventCenter","latRads","acos","lngRads","atan2","geodecoder","features","store","id","name","find","search","lat","lng","country","coords","pointInPolygon","code","j","poly","xi","xj","yi","yj","inside","loader","Earth","_this","_ref$origin","origin","color","classCallCheck","earth","BrowserDetect","mobile","sphereGeometry","sphereMaterial","transparent","opacity","outlineMaterial","VistaColors","side","outline","rotateX","maps","worldMapTextures","NEAR","MID","FAR","DEFAULT","axios","location","hostname","then","loadMap","loadTextureMobile","key","loadTexture","res","data","textureData","JSON","parse","texture","visible","geoScale","objects","hasOwnProperty","countriesMaterials","mesh","topojson","memo","cityClusters","loaded","Location","lastLocations","currentLocations","companies","showHide","children","found","elem","companyId","company","createLocation","loc","setZoomPositions","place","geo_point","parseInt","city","hqLocVec3","locationMaterial","industry_vertical","locationGeometries","positions","CURRENT","ORIGINAL","OTHER","address","cols","xInc","yInc","ceil","level","TARGET","l","locs","clock","lastTime","tick","posAnim","setInterval","getElapsedTime","delta","normalized","lerp","clearInterval","animatePos","range","locationFilter","inTheCountry","nearbyCompanies","trak","refLoc","refLocPrev","distanceFromCenter","list","_ref2","_ref3","DEFAULT_HQ","svgFillNone","fill","svgStroke","stroke","strokeWidth","svgFill","svg","Cursor","props","possibleConstructorReturn","getPrototypeOf","call","containerID","diameter","originGeo","originObject","getElementById","cursorElement","React","createRef","style","size","height","widht","width","centerOnOrgin","assertThisInitialized","setTimeout","screenOriginPos","toScreenPosition","hoist","edge","pointerEvents","setState","obj","camera","vector","widthHalf","heightHalf","updateMatrixWorld","setFromMatrixPosition","matrixWorld","project","react_default","createElement","className","ref","xmlns","viewBox","data-name","transform","x1","Component","ZoomBar","onZoom","currentTarget","onChange","zoomLevel","onClick","geo","mat","mesh1","mesh2","raycaster","zoomDirection","lastZoom","thresholds","zoomFlags","resetTexture","keep","textures","resetZoomFlags","round","num","numberDecimals","decimalCount","tempArr","e","Globe","sceneSetup","mount","scene","renderer","antialias","alpha","setClearColor","setSize","clickToRotate","touchToRotate","appendChild","controls","touchEnd","controlsChange","addCustomSceneObjects","locations","startAnimationLoop","render","lastActiveState","active","requestID","requestAnimationFrame","stopAnimationLoop","cancelAnimationFrame","handleWindowResize","aspect","Loc","cursor","shouldRecalculate","lastEventTimestamp","firstLoad","globeWasTapped","isCamTweening","camTweenDuration","postCamTweenDelay","thread","threads","spawn","input","done","Raycaster","getIntersectionWithEarth","_mouse","mouse","setFromCamera","intersectObject","clearTimeout","lastZoomTimeout","offloadWork","intersects","item","camDist","normalize","tweenCamera","_this2","touch","updateZoom","Worker","targetEdge","getTargetLatLong","Geographer","currentCursorRadius","abs","companiesNearBy","getNearByCompanies","filterMessage","updateByIDs","_this3","Cursor_Cursor","Globe_ZoomBar","zoomUpdate","PickerColumn","computeTranslate","options","itemHeight","columnHeight","selectedIndex","indexOf","onValueSelected","scrollerTranslate","minTranslate","maxTranslate","newValue","handleTouchStart","startTouchY","targetTouches","startScrollerTranslate","handleTouchMove","touchY","isMoving","nextScrollerTranslate","handleTouchEnd","activeIndex","_this$props","_this$state","handleTouchCancel","handleItemClick","option","objectSpread","nextProps","_this$props2","index","lineHeight","toLowerCase","replace","translateString","MsTransform","MozTransform","OTransform","WebkitTransform","transitionDuration","onTouchCancel","renderItems","Picker","_this$props3","optionGroups","valueGroups","highlightStyle","marginTop","columnNodes","Picker_PickerColumn","renderInner","propTyps","PropTypes","isRequired","func","number","defaultProps","Filter","objectWithoutProperties","_useState","useState","vertical","_useState2","slicedToArray","setValueGroups","_useState3","industryVerticals","_useState4","updateVertical","newVal","updateByVertical","filter","updateByGroup","useRef","thisElement","parentElement","picker","classList","toggle","points","Picker_Picker","defineProperty","Hq_location","doubleLine","_country","rad","maxCharacters","pos","triggerTrainingMode","cx","cy","r","textAnchor","Date_aquired","year","split","Date_exited","Logo","imgRef","offsetX","setOffsetX","useEffect","current","getBoundingClientRect","mask","href","src","Years_of_investment","exit","aquired","begining","diff","days","months","years","timeLable","timeNumber","lastCompany","fireCustomGoogleTagEvent","eventId","justNames","dataLayer","Location Selection","Company page selection","Add on companies","Other locations","Cities","Countries","padY","ind","region","y1","x2","y2","ScrollBtn","fontSize","display","ChevSize","pathUP","pathDown","Regions","gutter","regionRef","scrollable","maxHeight","param","setParam","scroll","setScroll","_useState5","_useState6","scrollStart","setScrollStart","_useState7","_useState8","lastScrollPos","setLastScrollPos","keepInBounds","getBBox","countryBlockOffset","btnSize","parentHeight","getComputedStyle","colW","onWheel","OtherLocations_ScrollBtn","sortRegions","regionNames","el","colum","o","row","g","OtherLocations","thisNodeRef","regions","windowPadding","innerWidth","_useState9","_useState10","scrollX","setScrollX","_useState11","_useState12","_useState13","_useState14","_useState15","colWidth","groupPadding","actualPadding","_useState16","getparams","_thisNodeRef$current$","workingWidth","_colW","innerHeight","scrollWindowWidth","contains","insertBefore","nextSibling","toggleDetail","stopColor","stopOpacity","overflow","buttons","ri","OtherLocations_Regions","total","ci","OtherLocations_Countries","li","OtherLocations_Cities","AddOnCompanies","setFontSize","setOffset","parentElemtn","thisNode","_list$children$getBou","transition","radiusOffset","titleOffsetY","titleOffsetX","titleY","titleX","acquisition_date","NODE","logo","dia","hq_location","date_exited","add_on_companies","other_locations","years_of_investment","date_aquired","Card","config","mass","tension","friction","nodePlacement","nodeBubbles","Nodes_Logo","Nodes_Hq_location","Nodes_Date_aquired","Nodes_Years_of_investment","Nodes_Date_exited","Company_OtherLocations","Company_AddOnCompanies","nodeLines","base","from","enter","onInitialCard","movingDirection","bubblesRef","nodeBubblesTrail","useTrail","linesRef","nodeLinesTrail","useChain","dangerouslySetInnerHTML","__html","value_proposition","web","Company","shouldClose","setShouldClose","setOnInitialCard","selectedCompanyIndex","setIndex","setMovingDirection","prev","next","arrowShow","timeStamp","seTouch","cardRef","transformFrom","transformLeave","leave","cardTransforms","setCardTransforms","_useSpring","useSpring","_useSpring2","bgSpring","setBgSpring","cards","setCards","cardTransition","useTransition","unique","onDestroyed","onRest","setSelectedCompany","nextCompany","shouldSlide","indx","previousCompany","closeCompany","changedTouches","div","Company_Card","alt","protocol","List","selected","currentTargetId","attributes","nodeValue","nearBy","propsStyle","ListRef","listMessage","message","companiesList","data-id","Instructions","iconDesktop","iconMobile","nodeName","title","Disclosure","showCopy","setClassName","propsStyles","setPropsStyles","disclosure","styleColors","entries","App","helpTimerDuration","activeGroup","activeVertical","companiesByFilter","allCompaniesInCircle","filteredCompaniesInCircle","selectedCompany","showHelpBlock","fullscreen","globeActive","originalCompanies","fetchCompanies","devURL","verticalName","vistIndx","splice","searchGroup","filteredCompanies","toConsumableArray","isInGroup","isInVertical","_this4","ids","filteredCircledCompanies","haveCompaniesChanged","foundCompany","_this5","resizeEvent","createEvent","initUIEvent","helpTimer","currentCompanyIndex","components_Company","_this6","resetHelpTimer","components_Instructions","globe_interactive","instructions_title","instructions_copy","components_Disclosure","disclosures","components_Filter","filterByVertical","filterByGroup","components_Globe","filterByIDs","components_List","getSelectedCompany","ReactDOM","src_App"],"mappings":"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","file":"static/js/main.87d85678.chunk.js","sourcesContent":["/**\n * Tween.js - Licensed under the MIT license\n * https://github.com/tweenjs/tween.js\n * ----------------------------------------------\n *\n * See https://github.com/tweenjs/tween.js/graphs/contributors for the full list of contributors.\n * Thank you all, you're awesome!\n */\n\n\nvar _Group = function () {\n\tthis._tweens = {};\n\tthis._tweensAddedDuringUpdate = {};\n};\n\n_Group.prototype = {\n\tgetAll: function () {\n\n\t\treturn Object.keys(this._tweens).map(function (tweenId) {\n\t\t\treturn this._tweens[tweenId];\n\t\t}.bind(this));\n\n\t},\n\n\tremoveAll: function () {\n\n\t\tthis._tweens = {};\n\n\t},\n\n\tadd: function (tween) {\n\n\t\tthis._tweens[tween.getId()] = tween;\n\t\tthis._tweensAddedDuringUpdate[tween.getId()] = tween;\n\n\t},\n\n\tremove: function (tween) {\n\n\t\tdelete this._tweens[tween.getId()];\n\t\tdelete this._tweensAddedDuringUpdate[tween.getId()];\n\n\t},\n\n\tupdate: function (time, preserve) {\n\n\t\tvar tweenIds = Object.keys(this._tweens);\n\n\t\tif (tweenIds.length === 0) {\n\t\t\treturn false;\n\t\t}\n\n\t\ttime = time !== undefined ? time : TWEEN.now();\n\n\t\t// Tweens are updated in \"batches\". If you add a new tween during an update, then the\n\t\t// new tween will be updated in the next batch.\n\t\t// If you remove a tween during an update, it may or may not be updated. However,\n\t\t// if the removed tween was added during the current batch, then it will not be updated.\n\t\twhile (tweenIds.length > 0) {\n\t\t\tthis._tweensAddedDuringUpdate = {};\n\n\t\t\tfor (var i = 0; i < tweenIds.length; i++) {\n\n\t\t\t\tvar tween = this._tweens[tweenIds[i]];\n\n\t\t\t\tif (tween && tween.update(time) === false) {\n\t\t\t\t\ttween._isPlaying = false;\n\n\t\t\t\t\tif (!preserve) {\n\t\t\t\t\t\tdelete this._tweens[tweenIds[i]];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\ttweenIds = Object.keys(this._tweensAddedDuringUpdate);\n\t\t}\n\n\t\treturn true;\n\n\t}\n};\n\nvar TWEEN = new _Group();\n\nTWEEN.Group = _Group;\nTWEEN._nextId = 0;\nTWEEN.nextId = function () {\n\treturn TWEEN._nextId++;\n};\n\n\n// Include a performance.now polyfill.\n// In node.js, use process.hrtime.\nif (typeof (window.self) === 'undefined' && typeof (process) !== 'undefined' && process.hrtime) {\n\tTWEEN.now = function () {\n\t\tvar time = process.hrtime();\n\n\t\t// Convert [seconds, nanoseconds] to milliseconds.\n\t\treturn time[0] * 1000 + time[1] / 1000000;\n\t};\n}\n// In a browser, use window.self.performance.now if it is available.\nelse if (typeof (window.self) !== 'undefined' &&\n         window.self.performance !== undefined &&\n\t\t window.self.performance.now !== undefined) {\n\t// This must be bound, because directly assigning this function\n\t// leads to an invocation exception in Chrome.\n\tTWEEN.now = window.self.performance.now.bind(window.self.performance);\n}\n// Use Date.now if it is available.\nelse if (Date.now !== undefined) {\n\tTWEEN.now = Date.now;\n}\n// Otherwise, use 'new Date().getTime()'.\nelse {\n\tTWEEN.now = function () {\n\t\treturn new Date().getTime();\n\t};\n}\n\n\nTWEEN.Tween = function (object, group) {\n\tthis._object = object;\n\tthis._valuesStart = {};\n\tthis._valuesEnd = {};\n\tthis._valuesStartRepeat = {};\n\tthis._duration = 1000;\n\tthis._repeat = 0;\n\tthis._repeatDelayTime = undefined;\n\tthis._yoyo = false;\n\tthis._isPlaying = false;\n\tthis._reversed = false;\n\tthis._delayTime = 0;\n\tthis._startTime = null;\n\tthis._easingFunction = TWEEN.Easing.Linear.None;\n\tthis._interpolationFunction = TWEEN.Interpolation.Linear;\n\tthis._chainedTweens = [];\n\tthis._onStartCallback = null;\n\tthis._onStartCallbackFired = false;\n\tthis._onUpdateCallback = null;\n\tthis._onRepeatCallback = null;\n\tthis._onCompleteCallback = null;\n\tthis._onStopCallback = null;\n\tthis._group = group || TWEEN;\n\tthis._id = TWEEN.nextId();\n\n};\n\nTWEEN.Tween.prototype = {\n\tgetId: function () {\n\t\treturn this._id;\n\t},\n\n\tisPlaying: function () {\n\t\treturn this._isPlaying;\n\t},\n\n\tto: function (properties, duration) {\n\n\t\tthis._valuesEnd = Object.create(properties);\n\n\t\tif (duration !== undefined) {\n\t\t\tthis._duration = duration;\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tduration: function duration(d) {\n\t\tthis._duration = d;\n\t\treturn this;\n\t},\n\n\tstart: function (time) {\n\n\t\tthis._group.add(this);\n\n\t\tthis._isPlaying = true;\n\n\t\tthis._onStartCallbackFired = false;\n\n\t\tthis._startTime = time !== undefined ? typeof time === 'string' ? TWEEN.now() + parseFloat(time) : time : TWEEN.now();\n\t\tthis._startTime += this._delayTime;\n\n\t\tfor (var property in this._valuesEnd) {\n\n\t\t\t// Check if an Array was provided as property value\n\t\t\tif (this._valuesEnd[property] instanceof Array) {\n\n\t\t\t\tif (this._valuesEnd[property].length === 0) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Create a local copy of the Array with the start value at the front\n\t\t\t\tthis._valuesEnd[property] = [this._object[property]].concat(this._valuesEnd[property]);\n\n\t\t\t}\n\n\t\t\t// If `to()` specifies a property that doesn't exist in the source object,\n\t\t\t// we should not set that property in the object\n\t\t\tif (this._object[property] === undefined) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Save the starting value.\n\t\t\tthis._valuesStart[property] = this._object[property];\n\n\t\t\tif ((this._valuesStart[property] instanceof Array) === false) {\n\t\t\t\tthis._valuesStart[property] *= 1.0; // Ensures we're using numbers, not strings\n\t\t\t}\n\n\t\t\tthis._valuesStartRepeat[property] = this._valuesStart[property] || 0;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tstop: function () {\n\n\t\tif (!this._isPlaying) {\n\t\t\treturn this;\n\t\t}\n\n\t\tthis._group.remove(this);\n\t\tthis._isPlaying = false;\n\n\t\tif (this._onStopCallback !== null) {\n\t\t\tthis._onStopCallback(this._object);\n\t\t}\n\n\t\tthis.stopChainedTweens();\n\t\treturn this;\n\n\t},\n\n\tend: function () {\n\n\t\tthis.update(Infinity);\n\t\treturn this;\n\n\t},\n\n\tstopChainedTweens: function () {\n\n\t\tfor (var i = 0, numChainedTweens = this._chainedTweens.length; i < numChainedTweens; i++) {\n\t\t\tthis._chainedTweens[i].stop();\n\t\t}\n\n\t},\n\n\tgroup: function (group) {\n\t\tthis._group = group;\n\t\treturn this;\n\t},\n\n\tdelay: function (amount) {\n\n\t\tthis._delayTime = amount;\n\t\treturn this;\n\n\t},\n\n\trepeat: function (times) {\n\n\t\tthis._repeat = times;\n\t\treturn this;\n\n\t},\n\n\trepeatDelay: function (amount) {\n\n\t\tthis._repeatDelayTime = amount;\n\t\treturn this;\n\n\t},\n\n\tyoyo: function (yoyo) {\n\n\t\tthis._yoyo = yoyo;\n\t\treturn this;\n\n\t},\n\n\teasing: function (easingFunction) {\n\n\t\tthis._easingFunction = easingFunction;\n\t\treturn this;\n\n\t},\n\n\tinterpolation: function (interpolationFunction) {\n\n\t\tthis._interpolationFunction = interpolationFunction;\n\t\treturn this;\n\n\t},\n\n\tchain: function () {\n\n\t\tthis._chainedTweens = arguments;\n\t\treturn this;\n\n\t},\n\n\tonStart: function (callback) {\n\n\t\tthis._onStartCallback = callback;\n\t\treturn this;\n\n\t},\n\n\tonUpdate: function (callback) {\n\n\t\tthis._onUpdateCallback = callback;\n\t\treturn this;\n\n\t},\n\n\tonRepeat: function onRepeat(callback) {\n\n\t\tthis._onRepeatCallback = callback;\n\t\treturn this;\n\n\t},\n\n\tonComplete: function (callback) {\n\n\t\tthis._onCompleteCallback = callback;\n\t\treturn this;\n\n\t},\n\n\tonStop: function (callback) {\n\n\t\tthis._onStopCallback = callback;\n\t\treturn this;\n\n\t},\n\n\tupdate: function (time) {\n\n\t\tvar property;\n\t\tvar elapsed;\n\t\tvar value;\n\n\t\tif (time < this._startTime) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (this._onStartCallbackFired === false) {\n\n\t\t\tif (this._onStartCallback !== null) {\n\t\t\t\tthis._onStartCallback(this._object);\n\t\t\t}\n\n\t\t\tthis._onStartCallbackFired = true;\n\t\t}\n\n\t\telapsed = (time - this._startTime) / this._duration;\n\t\telapsed = (this._duration === 0 || elapsed > 1) ? 1 : elapsed;\n\n\t\tvalue = this._easingFunction(elapsed);\n\n\t\tfor (property in this._valuesEnd) {\n\n\t\t\t// Don't update properties that do not exist in the source object\n\t\t\tif (this._valuesStart[property] === undefined) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tvar start = this._valuesStart[property] || 0;\n\t\t\tvar end = this._valuesEnd[property];\n\n\t\t\tif (end instanceof Array) {\n\n\t\t\t\tthis._object[property] = this._interpolationFunction(end, value);\n\n\t\t\t} else {\n\n\t\t\t\t// Parses relative end values with start as base (e.g.: +10, -3)\n\t\t\t\tif (typeof (end) === 'string') {\n\n\t\t\t\t\tif (end.charAt(0) === '+' || end.charAt(0) === '-') {\n\t\t\t\t\t\tend = start + parseFloat(end);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tend = parseFloat(end);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Protect against non numeric properties.\n\t\t\t\tif (typeof (end) === 'number') {\n\t\t\t\t\tthis._object[property] = start + (end - start) * value;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif (this._onUpdateCallback !== null) {\n\t\t\tthis._onUpdateCallback(this._object, elapsed);\n\t\t}\n\n\t\tif (elapsed === 1) {\n\n\t\t\tif (this._repeat > 0) {\n\n\t\t\t\tif (isFinite(this._repeat)) {\n\t\t\t\t\tthis._repeat--;\n\t\t\t\t}\n\n\t\t\t\t// Reassign starting values, restart by making startTime = now\n\t\t\t\tfor (property in this._valuesStartRepeat) {\n\n\t\t\t\t\tif (typeof (this._valuesEnd[property]) === 'string') {\n\t\t\t\t\t\tthis._valuesStartRepeat[property] = this._valuesStartRepeat[property] + parseFloat(this._valuesEnd[property]);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this._yoyo) {\n\t\t\t\t\t\tvar tmp = this._valuesStartRepeat[property];\n\n\t\t\t\t\t\tthis._valuesStartRepeat[property] = this._valuesEnd[property];\n\t\t\t\t\t\tthis._valuesEnd[property] = tmp;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis._valuesStart[property] = this._valuesStartRepeat[property];\n\n\t\t\t\t}\n\n\t\t\t\tif (this._yoyo) {\n\t\t\t\t\tthis._reversed = !this._reversed;\n\t\t\t\t}\n\n\t\t\t\tif (this._repeatDelayTime !== undefined) {\n\t\t\t\t\tthis._startTime = time + this._repeatDelayTime;\n\t\t\t\t} else {\n\t\t\t\t\tthis._startTime = time + this._delayTime;\n\t\t\t\t}\n\n\t\t\t\tif (this._onRepeatCallback !== null) {\n\t\t\t\t\tthis._onRepeatCallback(this._object);\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\n\t\t\t} else {\n\n\t\t\t\tif (this._onCompleteCallback !== null) {\n\n\t\t\t\t\tthis._onCompleteCallback(this._object);\n\t\t\t\t}\n\n\t\t\t\tfor (var i = 0, numChainedTweens = this._chainedTweens.length; i < numChainedTweens; i++) {\n\t\t\t\t\t// Make the chained tweens start exactly at the time they should,\n\t\t\t\t\t// even if the `update()` method was called way past the duration of the tween\n\t\t\t\t\tthis._chainedTweens[i].start(this._startTime + this._duration);\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n};\n\n\nTWEEN.Easing = {\n\n\tLinear: {\n\n\t\tNone: function (k) {\n\n\t\t\treturn k;\n\n\t\t}\n\n\t},\n\n\tQuadratic: {\n\n\t\tIn: function (k) {\n\n\t\t\treturn k * k;\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\treturn k * (2 - k);\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn 0.5 * k * k;\n\t\t\t}\n\n\t\t\treturn - 0.5 * (--k * (k - 2) - 1);\n\n\t\t}\n\n\t},\n\n\tCubic: {\n\n\t\tIn: function (k) {\n\n\t\t\treturn k * k * k;\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\treturn --k * k * k + 1;\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn 0.5 * k * k * k;\n\t\t\t}\n\n\t\t\treturn 0.5 * ((k -= 2) * k * k + 2);\n\n\t\t}\n\n\t},\n\n\tQuartic: {\n\n\t\tIn: function (k) {\n\n\t\t\treturn k * k * k * k;\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\treturn 1 - (--k * k * k * k);\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn 0.5 * k * k * k * k;\n\t\t\t}\n\n\t\t\treturn - 0.5 * ((k -= 2) * k * k * k - 2);\n\n\t\t}\n\n\t},\n\n\tQuintic: {\n\n\t\tIn: function (k) {\n\n\t\t\treturn k * k * k * k * k;\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\treturn --k * k * k * k * k + 1;\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn 0.5 * k * k * k * k * k;\n\t\t\t}\n\n\t\t\treturn 0.5 * ((k -= 2) * k * k * k * k + 2);\n\n\t\t}\n\n\t},\n\n\tSinusoidal: {\n\n\t\tIn: function (k) {\n\n\t\t\treturn 1 - Math.cos(k * Math.PI / 2);\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\treturn Math.sin(k * Math.PI / 2);\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\treturn 0.5 * (1 - Math.cos(Math.PI * k));\n\n\t\t}\n\n\t},\n\n\tExponential: {\n\n\t\tIn: function (k) {\n\n\t\t\treturn k === 0 ? 0 : Math.pow(1024, k - 1);\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\treturn k === 1 ? 1 : 1 - Math.pow(2, - 10 * k);\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\tif (k === 0) {\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\tif (k === 1) {\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn 0.5 * Math.pow(1024, k - 1);\n\t\t\t}\n\n\t\t\treturn 0.5 * (- Math.pow(2, - 10 * (k - 1)) + 2);\n\n\t\t}\n\n\t},\n\n\tCircular: {\n\n\t\tIn: function (k) {\n\n\t\t\treturn 1 - Math.sqrt(1 - k * k);\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\treturn Math.sqrt(1 - (--k * k));\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn - 0.5 * (Math.sqrt(1 - k * k) - 1);\n\t\t\t}\n\n\t\t\treturn 0.5 * (Math.sqrt(1 - (k -= 2) * k) + 1);\n\n\t\t}\n\n\t},\n\n\tElastic: {\n\n\t\tIn: function (k) {\n\n\t\t\tif (k === 0) {\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\tif (k === 1) {\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\treturn -Math.pow(2, 10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI);\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\tif (k === 0) {\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\tif (k === 1) {\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\treturn Math.pow(2, -10 * k) * Math.sin((k - 0.1) * 5 * Math.PI) + 1;\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\tif (k === 0) {\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\tif (k === 1) {\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\tk *= 2;\n\n\t\t\tif (k < 1) {\n\t\t\t\treturn -0.5 * Math.pow(2, 10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI);\n\t\t\t}\n\n\t\t\treturn 0.5 * Math.pow(2, -10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI) + 1;\n\n\t\t}\n\n\t},\n\n\tBack: {\n\n\t\tIn: function (k) {\n\n\t\t\tvar s = 1.70158;\n\n\t\t\treturn k * k * ((s + 1) * k - s);\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\tvar s = 1.70158;\n\n\t\t\treturn --k * k * ((s + 1) * k + s) + 1;\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\tvar s = 1.70158 * 1.525;\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn 0.5 * (k * k * ((s + 1) * k - s));\n\t\t\t}\n\n\t\t\treturn 0.5 * ((k -= 2) * k * ((s + 1) * k + s) + 2);\n\n\t\t}\n\n\t},\n\n\tBounce: {\n\n\t\tIn: function (k) {\n\n\t\t\treturn 1 - TWEEN.Easing.Bounce.Out(1 - k);\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\tif (k < (1 / 2.75)) {\n\t\t\t\treturn 7.5625 * k * k;\n\t\t\t} else if (k < (2 / 2.75)) {\n\t\t\t\treturn 7.5625 * (k -= (1.5 / 2.75)) * k + 0.75;\n\t\t\t} else if (k < (2.5 / 2.75)) {\n\t\t\t\treturn 7.5625 * (k -= (2.25 / 2.75)) * k + 0.9375;\n\t\t\t} else {\n\t\t\t\treturn 7.5625 * (k -= (2.625 / 2.75)) * k + 0.984375;\n\t\t\t}\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\tif (k < 0.5) {\n\t\t\t\treturn TWEEN.Easing.Bounce.In(k * 2) * 0.5;\n\t\t\t}\n\n\t\t\treturn TWEEN.Easing.Bounce.Out(k * 2 - 1) * 0.5 + 0.5;\n\n\t\t}\n\n\t}\n\n};\n\nTWEEN.Interpolation = {\n\n\tLinear: function (v, k) {\n\n\t\tvar m = v.length - 1;\n\t\tvar f = m * k;\n\t\tvar i = Math.floor(f);\n\t\tvar fn = TWEEN.Interpolation.Utils.Linear;\n\n\t\tif (k < 0) {\n\t\t\treturn fn(v[0], v[1], f);\n\t\t}\n\n\t\tif (k > 1) {\n\t\t\treturn fn(v[m], v[m - 1], m - f);\n\t\t}\n\n\t\treturn fn(v[i], v[i + 1 > m ? m : i + 1], f - i);\n\n\t},\n\n\tBezier: function (v, k) {\n\n\t\tvar b = 0;\n\t\tvar n = v.length - 1;\n\t\tvar pw = Math.pow;\n\t\tvar bn = TWEEN.Interpolation.Utils.Bernstein;\n\n\t\tfor (var i = 0; i <= n; i++) {\n\t\t\tb += pw(1 - k, n - i) * pw(k, i) * v[i] * bn(n, i);\n\t\t}\n\n\t\treturn b;\n\n\t},\n\n\tCatmullRom: function (v, k) {\n\n\t\tvar m = v.length - 1;\n\t\tvar f = m * k;\n\t\tvar i = Math.floor(f);\n\t\tvar fn = TWEEN.Interpolation.Utils.CatmullRom;\n\n\t\tif (v[0] === v[m]) {\n\n\t\t\tif (k < 0) {\n\t\t\t\ti = Math.floor(f = m * (1 + k));\n\t\t\t}\n\n\t\t\treturn fn(v[(i - 1 + m) % m], v[i], v[(i + 1) % m], v[(i + 2) % m], f - i);\n\n\t\t} else {\n\n\t\t\tif (k < 0) {\n\t\t\t\treturn v[0] - (fn(v[0], v[0], v[1], v[1], -f) - v[0]);\n\t\t\t}\n\n\t\t\tif (k > 1) {\n\t\t\t\treturn v[m] - (fn(v[m], v[m], v[m - 1], v[m - 1], f - m) - v[m]);\n\t\t\t}\n\n\t\t\treturn fn(v[i ? i - 1 : 0], v[i], v[m < i + 1 ? m : i + 1], v[m < i + 2 ? m : i + 2], f - i);\n\n\t\t}\n\n\t},\n\n\tUtils: {\n\n\t\tLinear: function (p0, p1, t) {\n\n\t\t\treturn (p1 - p0) * t + p0;\n\n\t\t},\n\n\t\tBernstein: function (n, i) {\n\n\t\t\tvar fc = TWEEN.Interpolation.Utils.Factorial;\n\n\t\t\treturn fc(n) / fc(i) / fc(n - i);\n\n\t\t},\n\n\t\tFactorial: (function () {\n\n\t\t\tvar a = [1];\n\n\t\t\treturn function (n) {\n\n\t\t\t\tvar s = 1;\n\n\t\t\t\tif (a[n]) {\n\t\t\t\t\treturn a[n];\n\t\t\t\t}\n\n\t\t\t\tfor (var i = n; i > 1; i--) {\n\t\t\t\t\ts *= i;\n\t\t\t\t}\n\n\t\t\t\ta[n] = s;\n\t\t\t\treturn s;\n\n\t\t\t};\n\n\t\t})(),\n\n\t\tCatmullRom: function (p0, p1, p2, p3, t) {\n\n\t\t\tvar v0 = (p2 - p0) * 0.5;\n\t\t\tvar v1 = (p3 - p1) * 0.5;\n\t\t\tvar t2 = t * t;\n\t\t\tvar t3 = t * t2;\n\n\t\t\treturn (2 * p1 - 2 * p2 + v0 + v1) * t3 + (- 3 * p1 + 3 * p2 - 2 * v0 - v1) * t2 + v0 * t + p1;\n\n\t\t}\n\n\t}\n\n};\n\nexport default TWEEN;\n// export default TWEEN;\n// export const OrbitControls\n\n// UMD (Universal Module Definition)\n// (function (root) {\n//\n// \tconsole.log(root);\n// \talert(\"here\")\n//\n// \tif (typeof define === 'function' && define.amd) {\n//\n// \t\t// AMD\n// \t\tdefine([], function () {\n// \t\t\treturn TWEEN;\n// \t\t});\n//\n// \t} else if (typeof module !== 'undefined' && typeof exports === 'object') {\n//\n// \t\t// Node.js\n// \t\tmodule.exports = TWEEN;\n//\n// \t} else if (root !== undefined) {\n//\n// \t\t// Global variable\n// \t\troot.TWEEN = TWEEN;\n//\n// \t}\n//\n// })(this);\n","export default {\n  // NOTE: verticals are in the order they should appear\n  verticals : {\n    \"Horizontal\" : \"#8D5C0C\",\n    \"Nonprofit\" : \"#984A17\",\n    \"Education\" : \"#A0381E\",\n    \"Energy\" : \"#9A1F24\",\n    \"Government\" : \"#A02A38\",\n    \"Agriculture\" : \"#A02B4F\",\n    \"Healthcare\" : \"#A3296B\",\n    \"Insurance\" : \"#933771\",\n    \"Legal\" : \"#7D2695\",\n    \"HR & Recruiting\" : \"#6329AF\",\n    \"Managed Services\" : \"#4F29CC\",\n    \"Financial Services\" : \"#3232E6\",\n    \"Sales & Marketing\" : \"#1751D3\",\n    \"Retail\" : \"#136AAA\",\n    \"Hospitality\" : \"#0F7A93\",\n    \"Real Estate\" : \"#108178\",\n    \"Sports, Media & Entertainment\" : \"#0C794F\",\n    \"Security\" : \"#167132\",\n    \"Telecom\" : \"#35691E\",\n    \"Automotive\" : \"#4E6E1B\",\n    \"Transportation\" : \"#676715\",\n    \"Vista\": \"#ffffff\",\n  },\n  grays : {\n    \"Level_1\" : \"#A0A0A0\",\n    \"Level_2\" : \"#727272\",\n    \"Level_3\" : \"#505050\",\n    \"Level_4\" : \"#383838\",\n  },\n   general:{\n     \"Dark_Blue\" : \"#011B30\",\n     \"White\" : \"#FFFFFF\",\n\n   }\n}\n","import * as THREE from 'three'\n/**\n * @author qiao / https://github.com/qiao\n * @author mrdoob / http://mrdoob.com\n * @author alteredq / http://alteredqualia.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author erich666 / http://erichaines.com\n */\n\n// This set of controls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n//\n//    Orbit - left mouse / touch: one-finger move\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\n//    Pan - right mouse, or left mouse + ctrl/metaKey, or arrow keys / touch: two-finger move\n\nconst _OrbitControls = function ( object, domElement , sphere ) {\n\n\tthis.object = object;\n\n\tthis.sphere = sphere || null\n\n\tthis.domElement = ( domElement !== undefined ) ? domElement : document;\n\n\t// Set to false to disable this control\n\tthis.enabled = true;\n\n\t// \"target\" sets the location of focus, where the object orbits around\n\tthis.target = new THREE.Vector3();\n\n\t// How far you can dolly in and out ( PerspectiveCamera only )\n\tthis.minDistance = 0;\n\tthis.maxDistance = Infinity;\n\n\t// How far you can zoom in and out ( OrthographicCamera only )\n\tthis.minZoom = 0;\n\tthis.maxZoom = Infinity;\n\n\t// How far you can orbit vertically, upper and lower limits.\n\t// Range is 0 to Math.PI radians.\n\tthis.minPolarAngle = 0; // radians\n\tthis.maxPolarAngle = Math.PI; // radians\n\n\t// How far you can orbit horizontally, upper and lower limits.\n\t// If set, must be a sub-interval of the interval [ - Math.PI, Math.PI ].\n\tthis.minAzimuthAngle = - Infinity; // radians\n\tthis.maxAzimuthAngle = Infinity; // radians\n\n\t// Set to true to enable damping (inertia)\n\t// If damping is enabled, you must call controls.update() in your animation loop\n\tthis.enableDamping = false;\n\tthis.dampingFactor = 0.25;\n\n\t// This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\n\t// Set to false to disable zooming\n\tthis.enableZoom = true;\n\tthis.zoomSpeed = 1.0;\n\n\t// Set to false to disable rotating\n\tthis.enableRotate = true;\n\tthis.rotateSpeed = 1.0;\n\n\t// Set to false to disable panning\n\tthis.enablePan = true;\n\tthis.panSpeed = 1.0;\n\tthis.screenSpacePanning = false; // if true, pan in screen-space\n\tthis.keyPanSpeed = 7.0;\t// pixels moved per arrow key push\n\n\t// Set to true to automatically rotate around the target\n\t// If auto-rotate is enabled, you must call controls.update() in your animation loop\n\tthis.autoRotate = false;\n\tthis.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60\n\n\t// Set to false to disable use of the keys\n\tthis.enableKeys = true;\n\n\t// The four arrow keys\n\tthis.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40 };\n\n\t// Mouse buttons\n\tthis.mouseButtons = { LEFT: THREE.MOUSE.LEFT, MIDDLE: THREE.MOUSE.MIDDLE, RIGHT: THREE.MOUSE.RIGHT };\n\n\t// for reset\n\tthis.target0 = this.target.clone();\n\tthis.position0 = this.object.position.clone();\n\tthis.zoom0 = this.object.zoom;\n\n\t//\n\t// public methods\n\t//\n\n\tthis.getPolarAngle = function () {\n\n\t\treturn spherical.phi;\n\n\t};\n\n\tthis.getAzimuthalAngle = function () {\n\n\t\treturn spherical.theta;\n\n\t};\n\n\tthis.saveState = function () {\n\n\t\tscope.target0.copy( scope.target );\n\t\tscope.position0.copy( scope.object.position );\n\t\tscope.zoom0 = scope.object.zoom;\n\n\t};\n\n\tthis.reset = function () {\n\n\t\tscope.target.copy( scope.target0 );\n\t\tscope.object.position.copy( scope.position0 );\n\t\tscope.object.zoom = scope.zoom0;\n\n\t\tscope.object.updateProjectionMatrix();\n\t\tscope.dispatchEvent( changeEvent );\n\n\t\tscope.update();\n\n\t\tstate = STATE.NONE;\n\n\t};\n\n\t// this method is exposed, but perhaps it would be better if we can make it private...\n\tthis.update = function () {\n\n\t\tvar offset = new THREE.Vector3();\n\n\t\t// so camera.up is the orbit axis\n\t\tvar quat = new THREE.Quaternion().setFromUnitVectors( object.up, new THREE.Vector3( 0, 1, 0 ) );\n\t\tvar quatInverse = quat.clone().inverse();\n\n\t\tvar lastPosition = new THREE.Vector3();\n\t\tvar lastQuaternion = new THREE.Quaternion();\n\n\t\treturn function update() {\n\n\t\t\tvar position = scope.object.position;\n\t\t\t// var position = scope.sphere.position;\n\t\t\t\n\t\t\toffset.copy( position ).sub( scope.target );\n\n\t\t\t// rotate offset to \"y-axis-is-up\" space\n\t\t\toffset.applyQuaternion( quat );\n\n\t\t\t// angle from z-axis around y-axis\n\t\t\tspherical.setFromVector3( offset );\n\n\t\t\tif ( scope.autoRotate && state === STATE.NONE ) {\n\n\t\t\t\trotateLeft( getAutoRotationAngle() );\n\n\t\t\t}\n\n\t\t\tspherical.theta += sphericalDelta.theta;\n\t\t\tspherical.phi += sphericalDelta.phi;\n\n\t\t\t// restrict theta to be between desired limits\n\t\t\tspherical.theta = Math.max( scope.minAzimuthAngle, Math.min( scope.maxAzimuthAngle, spherical.theta ) );\n\n\t\t\t// restrict phi to be between desired limits\n\t\t\tspherical.phi = Math.max( scope.minPolarAngle, Math.min( scope.maxPolarAngle, spherical.phi ) );\n\n\t\t\tspherical.makeSafe();\n\n\n\t\t\tspherical.radius *= scale;\n\n\t\t\t// restrict radius to be between desired limits\n\t\t\tspherical.radius = Math.max( scope.minDistance, Math.min( scope.maxDistance, spherical.radius ) );\n\n\t\t\t// move target to panned location\n\t\t\tscope.target.add( panOffset );\n\n\t\t\toffset.setFromSpherical( spherical );\n\n\t\t\t// rotate offset back to \"camera-up-vector-is-up\" space\n\t\t\toffset.applyQuaternion( quatInverse );\n\n\t\t\tposition.copy( scope.target ).add( offset );\n\n\t\t\tscope.object.lookAt( scope.target );\n\n\t\t\tif ( scope.enableDamping === true ) {\n\n\t\t\t\tsphericalDelta.theta *= ( 1 - scope.dampingFactor );\n\t\t\t\tsphericalDelta.phi *= ( 1 - scope.dampingFactor );\n\n\t\t\t\tpanOffset.multiplyScalar( 1 - scope.dampingFactor );\n\n\t\t\t} else {\n\n\t\t\t\tsphericalDelta.set( 0, 0, 0 );\n\n\t\t\t\tpanOffset.set( 0, 0, 0 );\n\n\t\t\t}\n\n\t\t\tscale = 1;\n\n\t\t\t// update condition is:\n\t\t\t// min(camera displacement, camera rotation in radians)^2 > EPS\n\t\t\t// using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\n\t\t\tif ( zoomChanged ||\n\t\t\t\tlastPosition.distanceToSquared( scope.object.position ) > EPS ||\n\t\t\t\t8 * ( 1 - lastQuaternion.dot( scope.object.quaternion ) ) > EPS ) {\n\n\t\t\t\tscope.dispatchEvent( changeEvent );\n\n\t\t\t\tlastPosition.copy( scope.object.position );\n\t\t\t\tlastQuaternion.copy( scope.object.quaternion );\n\t\t\t\tzoomChanged = false;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\t\t\treturn false;\n\n\t\t};\n\n\t}();\n\n\tthis.dispose = function () {\n\n\t\tscope.domElement.removeEventListener( 'contextmenu', onContextMenu, false );\n\t\tscope.domElement.removeEventListener( 'mousedown', onMouseDown, false );\n\t\tscope.domElement.removeEventListener( 'wheel', onMouseWheel, false );\n\n\t\tscope.domElement.removeEventListener( 'touchstart', onTouchStart, false );\n\t\tscope.domElement.removeEventListener( 'touchend', onTouchEnd, false );\n\t\tscope.domElement.removeEventListener( 'touchmove', onTouchMove, false );\n\n\t\tdocument.removeEventListener( 'mousemove', onMouseMove, false );\n\t\tdocument.removeEventListener( 'mouseup', onMouseUp, false );\n\n\t\twindow.removeEventListener( 'keydown', onKeyDown, false );\n\n\t\t//scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\n\n\t};\n\n\t//Custom stuff!!!\n\tthis.getState = function(){\n\t\treturn state;\n\t};\n\n\t// this.dIn = dollyIn;\n\t// this.dOut = dollyOut;\n\tlet zoomBar = 0;\n\tthis.zoomBar = function( dir ) {\n\n\t\tif ( dir < zoomBar ) {\n\n\t\t\tdollyOut( getZoomScale() );\n\n\t\t} else if ( dir > zoomBar ) {\n\n\t\t\tdollyIn( getZoomScale() );\n\n\t\t}\n\n\t\tscope.update();\n\t\treturn this.getZoomPercent( );\n\t}\n\t\n\tthis.getScale = function(){\n\t\treturn spherical.radius;\n\t};\n\tthis.getZoomPercent = function(){\n\t\tif ( scope.object.isPerspectiveCamera ) {\n\t\t\tif ( scope.maxDistance === Infinity) throw \"Need to have a non infinite number!\"\n\t\t\treturn (spherical.radius - scope.minDistance) / (scope.maxDistance - scope.minDistance)\n\t\t}\n\t\telse if ( scope.object.isOrthographicCamera ) {\n\t\t\tif ( scope.maxZoom === Infinity) throw \"Need to have a non infinite number!\"\n\t\t\treturn (scope.object.zoom  - scope.minZoom) / (scope.maxZoom - scope.minZoom)\n\t\t}\n\t}\n\t//\n\t// internals\n\t//\n\n\tvar scope = this;\n\n\tvar changeEvent = { type: 'change' };\n\tvar startEvent = { type: 'start' };\n\tvar endEvent = { type: 'end' };\n\n\tvar STATE = { NONE: - 1, ROTATE: 0, DOLLY: 1, PAN: 2, TOUCH_ROTATE: 3, TOUCH_DOLLY_PAN: 4 };\n\t//********************\n\tvar state = STATE.NONE;\n\n\tvar EPS = 0.000001;\n\n\t// current position in spherical coordinates\n\tvar spherical = new THREE.Spherical();\n\tvar sphericalDelta = new THREE.Spherical();\n\n\tvar scale = 1;\n\tvar panOffset = new THREE.Vector3();\n\tvar zoomChanged = false;\n\n\tvar rotateStart = new THREE.Vector2();\n\tvar rotateEnd = new THREE.Vector2();\n\tvar rotateDelta = new THREE.Vector2();\n\n\tvar panStart = new THREE.Vector2();\n\tvar panEnd = new THREE.Vector2();\n\tvar panDelta = new THREE.Vector2();\n\n\tvar dollyStart = new THREE.Vector2();\n\tvar dollyEnd = new THREE.Vector2();\n\tvar dollyDelta = new THREE.Vector2();\n\n\tfunction getAutoRotationAngle() {\n\n\t\treturn 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\n\n\t}\n\n\tfunction getZoomScale() {\n\n\t\treturn Math.pow( 0.95, scope.zoomSpeed );\n\n\t}\n\n\tfunction rotateLeft( angle ) {\n\n\t\tsphericalDelta.theta -= angle;\n\n\t}\n\n\tfunction rotateUp( angle ) {\n\n\t\tsphericalDelta.phi -= angle;\n\n\t}\n\n\tvar panLeft = function () {\n\n\t\tvar v = new THREE.Vector3();\n\n\t\treturn function panLeft( distance, objectMatrix ) {\n\n\t\t\tv.setFromMatrixColumn( objectMatrix, 0 ); // get X column of objectMatrix\n\t\t\tv.multiplyScalar( - distance );\n\n\t\t\tpanOffset.add( v );\n\n\t\t};\n\n\t}();\n\n\tvar panUp = function () {\n\n\t\tvar v = new THREE.Vector3();\n\n\t\treturn function panUp( distance, objectMatrix ) {\n\n\t\t\tif ( scope.screenSpacePanning === true ) {\n\n\t\t\t\tv.setFromMatrixColumn( objectMatrix, 1 );\n\n\t\t\t} else {\n\n\t\t\t\tv.setFromMatrixColumn( objectMatrix, 0 );\n\t\t\t\tv.crossVectors( scope.object.up, v );\n\n\t\t\t}\n\n\t\t\tv.multiplyScalar( distance );\n\n\t\t\tpanOffset.add( v );\n\n\t\t};\n\n\t}();\n\n\t// deltaX and deltaY are in pixels; right and down are positive\n\tvar pan = function () {\n\n\t\tvar offset = new THREE.Vector3();\n\n\t\treturn function pan( deltaX, deltaY ) {\n\n\t\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n\t\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\t\t// perspective\n\t\t\t\tvar position = scope.object.position;\n\t\t\t\toffset.copy( position ).sub( scope.target );\n\t\t\t\tvar targetDistance = offset.length();\n\n\t\t\t\t// half of the fov is center to top of screen\n\t\t\t\ttargetDistance *= Math.tan( ( scope.object.fov / 2 ) * Math.PI / 180.0 );\n\n\t\t\t\t// we use only clientHeight here so aspect ratio does not distort speed\n\t\t\t\tpanLeft( 2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix );\n\t\t\t\tpanUp( 2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix );\n\n\t\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\t\t// orthographic\n\t\t\t\tpanLeft( deltaX * ( scope.object.right - scope.object.left ) / scope.object.zoom / element.clientWidth, scope.object.matrix );\n\t\t\t\tpanUp( deltaY * ( scope.object.top - scope.object.bottom ) / scope.object.zoom / element.clientHeight, scope.object.matrix );\n\n\t\t\t} else {\n\n\t\t\t\t// camera neither orthographic nor perspective\n\t\t\t\tconsole.warn( 'WARNING: _OrbitControls.js encountered an unknown camera type - pan disabled.' );\n\t\t\t\tscope.enablePan = false;\n\n\t\t\t}\n\n\t\t};\n\n\t}();\n\n\tfunction dollyIn( dollyScale ) {\n\n\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\tscale /= dollyScale;\n\n\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom * dollyScale ) );\n\t\t\tscope.object.updateProjectionMatrix();\n\t\t\tzoomChanged = true;\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'WARNING: _OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\tscope.enableZoom = false;\n\n\t\t}\n\n\t}\n\n\tfunction dollyOut( dollyScale ) {\n\n\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\tscale *= dollyScale;\n\n\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom / dollyScale ) );\n\t\t\tscope.object.updateProjectionMatrix();\n\t\t\tzoomChanged = true;\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'WARNING: _OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\tscope.enableZoom = false;\n\n\t\t}\n\n\t}\n\n\t//\n\t// event callbacks - update the object state\n\t//\n\n\tfunction handleMouseDownRotate( event ) {\n\n\t\t//console.log( 'handleMouseDownRotate' );\n\n\t\trotateStart.set( event.clientX, event.clientY );\n\n\t}\n\n\tfunction handleMouseDownDolly( event ) {\n\n\t\t//console.log( 'handleMouseDownDolly' );\n\n\t\tdollyStart.set( event.clientX, event.clientY );\n\n\t}\n\n\tfunction handleMouseDownPan( event ) {\n\n\t\t//console.log( 'handleMouseDownPan' );\n\n\t\tpanStart.set( event.clientX, event.clientY );\n\n\t}\n\n\tfunction handleMouseMoveRotate( event ) {\n\n\t\t//console.log( 'handleMouseMoveRotate' );\n\n\t\trotateEnd.set( event.clientX, event.clientY );\n\n\t\trotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\n\n\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientHeight ); // yes, height\n\n\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\n\n\t\trotateStart.copy( rotateEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleMouseMoveDolly( event ) {\n\n\t\t//console.log( 'handleMouseMoveDolly' );\n\n\t\tdollyEnd.set( event.clientX, event.clientY );\n\n\t\tdollyDelta.subVectors( dollyEnd, dollyStart );\n\n\t\tif ( dollyDelta.y > 0 ) {\n\n\t\t\tdollyIn( getZoomScale() );\n\n\t\t} else if ( dollyDelta.y < 0 ) {\n\n\t\t\tdollyOut( getZoomScale() );\n\n\t\t}\n\n\t\tdollyStart.copy( dollyEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleMouseMovePan( event ) {\n\n\t\t//console.log( 'handleMouseMovePan' );\n\n\t\tpanEnd.set( event.clientX, event.clientY );\n\n\t\tpanDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\n\n\t\tpan( panDelta.x, panDelta.y );\n\n\t\tpanStart.copy( panEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleMouseUp( event ) {\n\n\t\t// console.log( 'handleMouseUp' );\n\n\t}\n\n\tfunction handleMouseWheel( event ) {\n\n\t\tconsole.log( 'handleMouseWheel' );\n\n\t\tif ( event.deltaY < 0 ) {\n\n\t\t\tdollyOut( getZoomScale() );\n\n\t\t} else if ( event.deltaY > 0 ) {\n\n\t\t\tdollyIn( getZoomScale() );\n\n\t\t}\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleKeyDown( event ) {\n\n\t\t//console.log( 'handleKeyDown' );\n\n\t\tswitch ( event.keyCode ) {\n\n\t\t\tcase scope.keys.UP:\n\t\t\t\tpan( 0, scope.keyPanSpeed );\n\t\t\t\tscope.update();\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.BOTTOM:\n\t\t\t\tpan( 0, - scope.keyPanSpeed );\n\t\t\t\tscope.update();\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.LEFT:\n\t\t\t\tpan( scope.keyPanSpeed, 0 );\n\t\t\t\tscope.update();\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.RIGHT:\n\t\t\t\tpan( - scope.keyPanSpeed, 0 );\n\t\t\t\tscope.update();\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\tfunction handleTouchStartRotate( event ) {\n\n\t\t//console.log( 'handleTouchStartRotate' );\n\n\t\trotateStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t}\n\n\tfunction handleTouchStartDollyPan( event ) {\n\n\t\t//console.log( 'handleTouchStartDollyPan' );\n\n\t\tif ( scope.enableZoom ) {\n\n\t\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\n\t\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\t\tdollyStart.set( 0, distance );\n\n\t\t}\n\n\t\tif ( scope.enablePan ) {\n\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\n\n\t\t\tpanStart.set( x, y );\n\n\t\t}\n\n\t}\n\n\tfunction handleTouchMoveRotate( event ) {\n\n\t\t//console.log( 'handleTouchMoveRotate' );\n\n\t\trotateEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t\trotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\n\n\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientHeight ); // yes, height\n\n\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\n\n\t\trotateStart.copy( rotateEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleTouchMoveDollyPan( event ) {\n\n\t\t//console.log( 'handleTouchMoveDollyPan' );\n\n\t\tif ( scope.enableZoom ) {\n\n\t\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\n\t\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\t\tdollyEnd.set( 0, distance );\n\n\t\t\tdollyDelta.set( 0, Math.pow( dollyEnd.y / dollyStart.y, scope.zoomSpeed ) );\n\n\t\t\tdollyIn( dollyDelta.y );\n\n\t\t\tdollyStart.copy( dollyEnd );\n\n\t\t}\n\n\t\tif ( scope.enablePan ) {\n\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\n\n\t\t\tpanEnd.set( x, y );\n\n\t\t\tpanDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\n\n\t\t\tpan( panDelta.x, panDelta.y );\n\n\t\t\tpanStart.copy( panEnd );\n\n\t\t}\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleTouchEnd( event ) {\n\n\t\t//console.log( 'handleTouchEnd' );\n\n\t}\n\n\t//\n\t// event handlers - FSM: listen for events and reset state\n\t//\n\n\tfunction onMouseDown( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\n\t\tswitch ( event.button ) {\n\n\t\t\tcase scope.mouseButtons.LEFT:\n\n\t\t\t\tif ( event.ctrlKey || event.metaKey ) {\n\n\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\thandleMouseDownPan( event );\n\n\t\t\t\t\tstate = STATE.PAN;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\thandleMouseDownRotate( event );\n\n\t\t\t\t\tstate = STATE.ROTATE;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase scope.mouseButtons.MIDDLE:\n\n\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\thandleMouseDownDolly( event );\n\n\t\t\t\tstate = STATE.DOLLY;\n\n\t\t\t\tbreak;\n\n\t\t\tcase scope.mouseButtons.RIGHT:\n\n\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\thandleMouseDownPan( event );\n\n\t\t\t\tstate = STATE.PAN;\n\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tif ( state !== STATE.NONE ) {\n\n\t\t\tdocument.addEventListener( 'mousemove', onMouseMove, false );\n\t\t\tdocument.addEventListener( 'mouseup', onMouseUp, false );\n\n\t\t\tscope.dispatchEvent( startEvent );\n\n\t\t}\n\n\t}\n\n\tfunction onMouseMove( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\n\t\tswitch ( state ) {\n\n\t\t\tcase STATE.ROTATE:\n\n\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\thandleMouseMoveRotate( event );\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.DOLLY:\n\n\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\thandleMouseMoveDolly( event );\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.PAN:\n\n\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\thandleMouseMovePan( event );\n\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\tfunction onMouseUp( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\thandleMouseUp( event );\n\n\t\tdocument.removeEventListener( 'mousemove', onMouseMove, false );\n\t\tdocument.removeEventListener( 'mouseup', onMouseUp, false );\n\n\t\tscope.dispatchEvent( endEvent );\n\n\t\tstate = STATE.NONE;\n\n\t}\n\n\tfunction onMouseWheel( event ) {\n\n\t\tif ( scope.enabled === false || scope.enableZoom === false || ( state !== STATE.NONE && state !== STATE.ROTATE ) ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tscope.dispatchEvent( startEvent );\n\n\t\thandleMouseWheel( event );\n\n\t\tscope.dispatchEvent( endEvent );\n\n\t}\n\n\tfunction onKeyDown( event ) {\n\n\t\tif ( scope.enabled === false || scope.enableKeys === false || scope.enablePan === false ) return;\n\n\t\thandleKeyDown( event );\n\n\t}\n\n\tfunction onTouchStart( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\n\t\tswitch ( event.touches.length ) {\n\n\t\t\tcase 1:\t// one-fingered touch: rotate\n\n\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\thandleTouchStartRotate( event );\n\n\t\t\t\tstate = STATE.TOUCH_ROTATE;\n\n\t\t\t\tbreak;\n\n\t\t\tcase 2:\t// two-fingered touch: dolly-pan\n\n\t\t\t\tif ( scope.enableZoom === false && scope.enablePan === false ) return;\n\n\t\t\t\thandleTouchStartDollyPan( event );\n\n\t\t\t\tstate = STATE.TOUCH_DOLLY_PAN;\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t\tif ( state !== STATE.NONE ) {\n\n\t\t\tscope.dispatchEvent( startEvent );\n\n\t\t}\n\n\t}\n\n\tfunction onTouchMove( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tswitch ( event.touches.length ) {\n\n\t\t\tcase 1: // one-fingered touch: rotate\n\n\t\t\t\tif ( scope.enableRotate === false ) return;\n\t\t\t\tif ( state !== STATE.TOUCH_ROTATE ) return; // is this needed?\n\n\t\t\t\thandleTouchMoveRotate( event );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 2: // two-fingered touch: dolly-pan\n\n\t\t\t\tif ( scope.enableZoom === false && scope.enablePan === false ) return;\n\t\t\t\tif ( state !== STATE.TOUCH_DOLLY_PAN ) return; // is this needed?\n\n\t\t\t\thandleTouchMoveDollyPan( event );\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t}\n\n\tfunction onTouchEnd( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\thandleTouchEnd( event );\n\n\t\tscope.dispatchEvent( endEvent );\n\n\t\tstate = STATE.NONE;\n\n\t}\n\n\tfunction onContextMenu( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\n\t}\n\n\t//\n\n\tscope.domElement.addEventListener( 'contextmenu', onContextMenu, false );\n\n\tscope.domElement.addEventListener( 'mousedown', onMouseDown, false );\n\tscope.domElement.addEventListener( 'wheel', onMouseWheel, false );\n\n\tscope.domElement.addEventListener( 'touchstart', onTouchStart, false );\n\tscope.domElement.addEventListener( 'touchend', onTouchEnd, false );\n\tscope.domElement.addEventListener( 'touchmove', onTouchMove, false );\n\n\twindow.addEventListener( 'keydown', onKeyDown, false );\n\n\t// force an update at start\n\n\tthis.update();\n\n};\n\n_OrbitControls.prototype = Object.create( THREE.EventDispatcher.prototype );\n_OrbitControls.prototype.constructor = _OrbitControls;\nexport const OrbitControls = _OrbitControls\n\nObject.defineProperties( _OrbitControls.prototype, {\n\n\tcenter: {\n\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'OrbitControls: .center has been renamed to .target' );\n\t\t\treturn this.target;\n\n\t\t}\n\n\t},\n\n\t// backward compatibility\n\n\tnoZoom: {\n\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.' );\n\t\t\treturn ! this.enableZoom;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.' );\n\t\t\tthis.enableZoom = ! value;\n\n\t\t}\n\n\t},\n\n\tnoRotate: {\n\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.' );\n\t\t\treturn ! this.enableRotate;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.' );\n\t\t\tthis.enableRotate = ! value;\n\n\t\t}\n\n\t},\n\n\tnoPan: {\n\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'OrbitControls: .noPan has been deprecated. Use .enablePan instead.' );\n\t\t\treturn ! this.enablePan;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'OrbitControls: .noPan has been deprecated. Use .enablePan instead.' );\n\t\t\tthis.enablePan = ! value;\n\n\t\t}\n\n\t},\n\n\tnoKeys: {\n\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.' );\n\t\t\treturn ! this.enableKeys;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.' );\n\t\t\tthis.enableKeys = ! value;\n\n\t\t}\n\n\t},\n\n\tstaticMoving: {\n\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.' );\n\t\t\treturn ! this.enableDamping;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.' );\n\t\t\tthis.enableDamping = ! value;\n\n\t\t}\n\n\t},\n\n\tdynamicDampingFactor: {\n\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.' );\n\t\t\treturn this.dampingFactor;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.' );\n\t\t\tthis.dampingFactor = value;\n\n\t\t}\n\n\t}\n\n} );\n","import * as d3 from 'd3'\n\nimport * as d3Geo from 'd3-geo'\nimport * as THREE from 'three'\n\nlet DEBUG =  !true\nlet radius\n\nexport const getPoint = ( { object, face } )=>{\n  if ( DEBUG ) console.log( `Geographer.getpoint`,  object  )\n  // Get the vertices\n  let a = object.geometry.vertices[face.a]\n  let b = object.geometry.vertices[face.b]\n  let c = object.geometry.vertices[face.c]\n\n  // Averge them together\n  let point = {\n    x: (a.x + b.x + c.x) / 3,\n    y: (a.y + b.y + c.y) / 3,\n    z: (a.z + b.z + c.z) / 3\n  }\n\n  return point\n}\n\n// Converts a point [longitude, latitude] in degrees to a THREE.Vector3.\nexport function longLatToVect3(point, _r) {\n  var r = _r || 0\n  var lambda = point[0] * Math.PI / 180,\n      phi = point[1] * Math.PI / 180,\n      cosPhi = Math.cos(phi)\n  return new THREE.Vector3(\n    radius * cosPhi * Math.cos(lambda),\n    radius * cosPhi * Math.sin(lambda),\n    radius * Math.sin(phi)\n  )\n}\n// Converts a GeoJSON MultiLineString in spherical coordinates to a THREE.LineSegments.\nexport function wireframe(multilinestring, material, _radius) {\n  var geometry = new THREE.Geometry()\n  radius = _radius\n  multilinestring.coordinates.forEach(function(line) {\n    d3.pairs(line.map(longLatToVect3), function(a, b) {\n      geometry.vertices.push(a, b)\n      // geometry.faces.push( new THREE.Face3( 0, 1, 2 ) )\n    })\n  })\n\n  return new THREE.LineSegments(geometry, material)\n}\n\n\nexport function getEventCenter(radius) {\n\n  if(radius === undefined) throw \"getEventCenter::please define a radius\"\n  else if ( this == undefined ) return\n  radius = radius || 200\n  var point = getPoint( this )\n  if ( DEBUG ) console.log( `Geographer.getEventCenter`, point )\n  // var point = this.point\n  var latRads = Math.acos(point.y / radius)\n  var lngRads = Math.atan2(point.z, point.x)\n  var lat = (Math.PI / 2 - latRads) * (180 / Math.PI)\n  var lng = (Math.PI - lngRads) * (180 / Math.PI)\n\n  return [lat, lng - 180]\n\n}\n\nexport function convertToXYZ(point, radius) {\n  if(radius === undefined) throw \"getEventCenter::please define a radius\"\n  radius = radius || 200\n\n  var latRads = ( 90 - point[0]) * Math.PI / 180\n  var lngRads = (180 - point[1]) * Math.PI / 180\n\n  var x = radius * Math.sin(latRads) * Math.cos(lngRads)\n  var y = radius * Math.cos(latRads)\n  var z = radius * Math.sin(latRads) * Math.sin(lngRads)\n\n  return {x: x, y: y, z: z}\n}\n\nexport var geodecoder = function (features) {\n\n  let store = {}\n\n  for (let i = 0; i < features.length; i++) {\n    if(features[i].id !== undefined){\n      store[features[i].id] = features[i]\n    }\n    if(features[i].properties !== undefined){\n      if(features[i].properties.name !== undefined){\n        store[features[i].properties.name] = features[i]\n      }\n    }\n  }\n\n  return {\n    find: function (id) {\n      return store[id]\n    },\n    search: function (lat, lng) {\n\n      let match = false\n\n      let country, coords\n\n      for (let i = 0; i < features.length; i++) {\n        country = features[i]\n        if(country.geometry.type === 'Polygon') {\n          match = pointInPolygon(country.geometry.coordinates[0], [lng, lat])\n          if (match) {\n            return {\n              code: features[i].id,\n              name: features[i].properties.name\n            };\n          }\n        } else if (country.geometry.type === 'MultiPolygon') {\n          coords = country.geometry.coordinates\n          for (let j = 0; j < coords.length; j++) {\n            match = pointInPolygon(coords[j][0], [lng, lat])\n            if (match) {\n              return {\n                code: features[i].id,\n                name: features[i].properties.name\n              };\n            }\n          }\n        }\n      }\n\n      return null\n    }\n  };\n};\n\n// http://www.ecse.rpi.edu/Homepages/wrf/Research/Short_Notes/pnpoly.html\nvar pointInPolygon = function(poly, point) {\n\n  let x = point[0];\n  let y = point[1];\n\n  let inside = false, xi, xj, yi, yj, xk;\n\n  for (let i = 0, j = poly.length - 1; i < poly.length; j = i++) {\n    xi = poly[i][0];\n    yi = poly[i][1];\n    xj = poly[j][0];\n    yj = poly[j][1];\n\n    xk = ((yi > y) !== (yj > y)) && (x < (xj - xi) * (y - yi) / (yj - yi) + xi);\n    if (xk) {\n       inside = !inside;\n    }\n  }\n\n  return inside;\n};\n","import * as THREE from 'three'\nimport VistaColors from '../Colors.js'\nimport axios from \"axios\"\nimport * as topojson from 'topojson'\n// import worldMap from '../../data/world_map.json'\n\nimport {wireframe, geodecoder} from './Geographer'\n\nconst DEBUG = !true\n\n\nconst loader = new THREE.ObjectLoader( )\n\n\n\n\n/**\n  * @class Earth\n  */\nexport default class Earth {\n  /**\n    * @constructor {object}\n    */\n  constructor ( {radius, origin = new THREE.Vector3() , color } ) {\n\n    this.earth = new THREE.Group()\n\n\n    this.radius = radius;\n\n    if( !window.BrowserDetect.mobile ){\n      this.sphereGeometry = new THREE.SphereGeometry(radius, 400, 400 )\n    }else{\n      this.sphereGeometry = new THREE.SphereGeometry(radius, 100, 100 )\n    }\n    this.sphereMaterial = new THREE.MeshLambertMaterial( {  color , transparent: false, opacity: 1} )\n    this.outlineMaterial = new THREE.MeshLambertMaterial( { color:VistaColors.grays.Level_3 , transparent: true, opacity: 0.2, side: THREE.BackSide } )\n\n    // sphere needs to stay ( for now ) independent from earth otherwise lats get messed up\n    this.sphere = new THREE.Mesh( this.sphereGeometry, this.sphereMaterial )\n    this.sphere.position.set( origin.x, origin.y, origin.z )\n    this.sphere.name =\"globeSphere\"\n\n    this.outline = new THREE.Mesh( this.sphereGeometry, this.outlineMaterial )\n    this.outline.position.set( origin.x, origin.y, origin.z )\n    this.outline.name =\"globeOutline\"\n    this.outline.scale.multiplyScalar(1.05)\n    // this.earth.add(this.outline)\n\n    this.earth.position.set( origin.x, origin.y, origin.z )\n    this.earth.name = \"earth\"\n    this.earth.rotateX( -Math.PI/2)\n\n    this.maps = {}\n\n    this.worldMapTextures = {\n      NEAR: null,\n      MID: null,\n      FAR: null,\n      DEFAULT: null,\n    }\n    if ( DEBUG ) console.log(\"Earth \", radius, origin )\n\n\n    axios.get(`http://${window.location.hostname}/wp-json/globeInteractive/v1/map/countries`).then( loadMap.bind(this) )\n    axios.get(`http://${window.location.hostname}/wp-json/globeInteractive/v1/map/usa_states`).then( loadMap.bind(this) )\n\n    // Mobile optimization : load only a lightweight json dataset for texture (Texture_MOBILE.json)\n    if(window.BrowserDetect.mobile){\n\n      axios.get(`http://${window.location.hostname}/wp-json/globeInteractive/v1/texture/MOBILE`).then( loadTextureMobile.bind(this) )\n\n    } else {\n      Object.keys(this.worldMapTextures).map(key=>{\n        axios.get(`http://${window.location.hostname}/wp-json/globeInteractive/v1/texture/${key}`).then( loadTexture.bind(this) )\n      })\n\n    }\n  }\n}\n\n/**\n  * axios returns a singleresponse object with the texture for mobile\n  * all zoom levels set to same texture\n  * @method loadTextureMobile\n  * @param {object} res - response from ajax call\n  * ref: https://threejs.org/docs/#api/en/loaders/ObjectLoader\n  */\nconst loadTextureMobile = function (res) {\n\n  if( res.data ) {\n\n    const textureData = JSON.parse( res.data );\n    const texture = loader.parse( textureData );\n\n    for(let key in this.worldMapTextures) {\n      // set all to mobile texture (based on FAR json dataset)\n      this.worldMapTextures[key] = texture;\n      this.earth.add( this.worldMapTextures[key] );\n\n      if(key == 'DEFAULT') texture.visible = true;\n      console.log('key = ', key);\n    }\n\n  }\n}\n\n/**\n  * axios returns a response object with the texture\n  * @method loadTexture\n  * @param {object} res - response from ajax call\n  * ref: https://threejs.org/docs/#api/en/loaders/ObjectLoader\n  */\nconst loadTexture = function( res ) {\n\n  if( res.data ) {\n\n    const textureData = JSON.parse( res.data )\n    const texture = loader.parse( textureData )\n\n    this.worldMapTextures[texture.name] = texture;\n    if ( texture.name === \"DEFAULT\" ) texture.visible = true;\n    this.earth.add( this.worldMapTextures[texture.name] );\n    if ( DEBUG ) console.log(\"Earth.loadTexture:\", texture.name );\n  }\n\n}\n/**\n  * axios returns a response object with the map\n  * @method loadMap\n  * @param {object} res - response from ajax call\n  */\nconst loadMap = function( res ) {\n  if ( res.data ){\n    const data = JSON.parse(res.data).data\n\n    for (var geoScale in data.objects) {\n      if (data.objects.hasOwnProperty(geoScale) && geoScale !== \"type\") {\n        if ( DEBUG ) console.log(`Earth.${geoScale}`, data, this);\n\n        this.maps[geoScale] = {};\n        const countriesMaterials = new THREE.MeshBasicMaterial( { color: VistaColors.grays.Level_1 , transparent: true, opacity: 0.3} )\n        this.maps[geoScale].mesh = wireframe(topojson.mesh(data, data.objects[geoScale]), countriesMaterials , this.radius+0.5)\n\n        this.earth.add(this.maps[geoScale].mesh);\n\n        this.maps[geoScale].memo =  geodecoder(topojson.feature(data, data.objects[geoScale]).features);\n\n      }\n    }\n  }\n}\n\n\n/*\n let sphereGeometry = null\n    if( !window.BrowserDetect.mobile ){\n      sphereGeometry = new THREE.SphereGeometry(radius, 200, 200 )\n    }else{\n      sphereGeometry = new THREE.SphereGeometry(radius, 100, 100 )\n    }\n    const sphereMaterial = new THREE.MeshLambertMaterial( {  color: VistaColors.general.Dark_Blue, transparent: false, opacity: 1} )\n    const outlineMaterial = new THREE.MeshLambertMaterial( { color:VistaColors.grays.Level_3 , transparent: true, opacity: 0.2, side: THREE.BackSide } )\n\n    // sphere needs to stay ( for now ) independent from earth otherwise lats get messed up\n    const sphere = new THREE.Mesh( sphereGeometry, sphereMaterial )\n    sphere.position.set( origin.x, origin.y, origin.z )\n    sphere.name =\"globeSphere\"\n\n    const outline = new THREE.Mesh( sphereGeometry, outlineMaterial )\n    outline.position.set( origin.x, origin.y, origin.z )\n    outline.name =\"globeOutline\"\n    outline.scale.multiplyScalar(1.05)\n    // earth.add(outline)\n    this.scene.add( outline )\n    this.scene.add( sphere )\n*/","// globeTHREE -> Locations.js\nimport * as THREE from 'three'\n// import { longLatToVect3,\n//         wireframe,\n//         graticule10 } from './geoHelpers.js';\nimport VistaColors from '../Colors.js'\n// import {longLatToVect3} from './Geographer'\n\nlet DEBUG = !true\nlet cityClusters = { }\nlet colorTrack = { }\nlet currentLevel = ''\nlet loaded = false\nexport default class Location {\n\n  constructor( { radius, origin = new THREE.Vector3( ) } ) {\n\n    this.radius = radius+1\n    this.lastLocations = []\n    this.currentLocations = []\n    this.origin = origin\n    this.group = new THREE.Group()\n    this.group.name = \"locations\"\n    this.group.position.set(this.origin.x, this.origin.y, this.origin.z)\n    this.group.rotateX(-Math.PI / 2)\n    // maybe just retrun locations???\n    if ( DEBUG ) console.log( `Location.constructor` )\n\n  }\n\n  update( companies ) {\n\n    if ( DEBUG ) console.log(`Location.update`, companies)\n\n    if ( companies.length && !loaded ) {\n      if ( DEBUG ) console.log( `LOADING LOCATIONS FOR THE FIRST TIME!`)\n      this.create( companies )\n      loaded = true\n    }\n    else{\n      this.showHide( companies )\n    }\n\n  }\n\n  showHide ( companies ) {\n    // log\n    this.group.children.forEach( location =>{\n      const found = companies.find( elem => elem.id === location.companyId )\n      if (found) location.visible = true\n      else location.visible = false\n    })\n  }\n\n  create( companies ) {\n\n    //iterate through all the list\n    companies.map(company => {\n\n      this.group.add(this.createLocation(company, company['hq_location']))\n\n      company['other_locations'].map(loc => {\n\n        this.group.add(this.createLocation(company, loc))\n        return null\n      })\n      return null\n    })\n    this.setZoomPositions( )\n  }\n\n  createLocation( company, place ) {\n\n    if (place.geo_point) {\n      place.geo_point.lat = parseInt(place.geo_point.lat)\n      place.geo_point.lng = parseInt(place.geo_point.lng)\n      if ( DEBUG ) console.log(`Location`, place.city, place.geo_point);\n      let hqLocVec3 = this.longLatToVect3(place.geo_point)\n\n\n      let locationMaterial = new THREE.MeshBasicMaterial({\n        color: VistaColors.verticals[company.industry_vertical],\n        side: THREE.BackSide,\n        wireframe: false,\n        transparent: true,\n        opacity: 1\n      })\n\n      let loc = new THREE.Mesh(locationGeometries.FAR, locationMaterial)\n      loc.city = place.city\n      loc.state = place.state\n      loc.country = place.country\n      loc.companyId = company.id\n      loc.name = company.name\n      loc.group = company.group\n      loc.industry_vertical = company.industry_vertical\n      loc.positions = {\n        CURRENT: place.geo_point,\n        ORIGINAL: place.geo_point,\n        OTHER: this.longLatToVect3( place.geo_point )\n      }\n      loc.position.copy(hqLocVec3);\n      loc.lookAt(this.origin.x, -this.origin.y / 2, this.origin.z);\n      cityClusters[place.geo_point.address] = cityClusters[place.geo_point.address] || [ ]\n      cityClusters[place.geo_point.address].push(loc)\n      return loc\n    }\n\n  }\n\n  setZoomPositions(  ) {\n    // On load calculate all the possible Vector3 positions that the locations can have and store them.\n    // this should save computation time when interacting\n    if ( DEBUG ) console.log( `Locations.setZoomPositions`, this.group.children.length, cityClusters)\n\n    for (var city in cityClusters) {\n      if (cityClusters.hasOwnProperty(city)) {\n        let cols =''\n        let length = cityClusters[city].length\n\n        if(length < 6) cols = 2\n        else if (length >=6 && length < 13 ) cols = 3\n        else if (length >= 13 ) cols = 4\n        let i = 0\n        for (var x = 0, xInc = 0; x <= cols; x++, xInc+=0.23) {\n          for (var y = 0, yInc = 0; y < Math.ceil(length/cols); y++, yInc+=0.19) {\n            // let i = y + x * cols\n            if(i < length ){\n              cityClusters[city][i].positions.CURRENT.lat += xInc\n              cityClusters[city][i].positions.CURRENT.lng -= yInc\n              cityClusters[city][i].positions.NEAR = this.longLatToVect3( cityClusters[city][i].positions.CURRENT )\n            }\n            // try {\n            //   // cityClusters[city][i].scale.set(1, 1, 1)\n            // } catch (e) { }\n            i++\n          }\n        }\n      }\n    }\n  }\n\n  updateZoom( level ){\n    if ( DEBUG ) console.log( `Locations.updateZoom`, level , this.group.children.length, cityClusters)\n\n    switch ( level ) {\n      case \"NEAR\":\n        for (var i = 0; i < this.group.children.length; i++) {\n          this.group.children[i].geometry = locationGeometries[level]\n          this.group.children[i].positions.TARGET = this.group.children[i].positions.NEAR\n        }\n\n        break\n      default:\n        for (var l = 0; l < this.group.children.length; l++) {\n          this.group.children[l].geometry = locationGeometries[level]\n          this.group.children[l].positions.TARGET = this.group.children[l].positions.OTHER\n        }\n    }\n    animatePos(this.group)\n\n    currentLevel = level\n  }\n\n  getNearByCompanies( center, range, locationFilter ) {\n    \n    let nearbyCompanies = []\n    let trak = {}\n    let inTheCountry\n    let refLoc = {city: null, state: null, country:null}\n    let refLocPrev = {city: null, state: null, country:null}\n    // if ( DEBUG ) console.log( `\\n\\tLocation.getNearByCompanies`, distance, range )\n    inTheCountry = this.group.children\n    // console.log(center, range, locationFilter );\n    // HACK: above lat 65 the range starts being insanely high. so just clamp it\n    if (center[1] > 64.5) range = 7.5\n    for (var i = 0; i < inTheCountry.length; i++) {\n      let distance = distanceFromCenter(center, inTheCountry[i].positions.ORIGINAL)\n      // let distance = distanceFromCenter( center, inTheCountry[i].geometry.coordinates );\n      if (distance < range) {\n        // only report unique companies.\n        if (trak[inTheCountry[i].companyId] === undefined) {\n          // if (inTheCountry[i].companyId !== \"Vista\") {\n            trak[inTheCountry[i].companyId] = inTheCountry[i].companyId\n            nearbyCompanies.push(inTheCountry[i].companyId)\n            refLoc.city = refLocPrev.city === null || refLocPrev.city === inTheCountry[i].city?inTheCountry[i].city:0\n            refLoc.state = inTheCountry[i].state\n            refLoc.country = inTheCountry[i].country\n            \n            refLocPrev = refLoc\n            \n          // }\n        }\n      }\n    }\n    if ( DEBUG ) console.log(\"\\ngetNearByCompanies\", refLoc)\n    return {list:nearbyCompanies, loc:refLoc }\n  }\n\n  longLatToVect3( { lat, lng } ) {\n    // convert to radians\n    // let theta = lat * Math.PI / 180,\n    //     phi = lng * Math.PI / 180,\n    //     cosPhi = Math.cos(phi)\n    let theta = lng * Math.PI / 180,\n        phi = lat * Math.PI / 180,\n        cosPhi = Math.cos(phi)\n\n    return new THREE.Vector3(\n      this.radius * cosPhi * Math.cos(theta),\n      this.radius * cosPhi * Math.sin(theta),\n      this.radius * Math.sin(phi)\n    )\n\n  }\n\n}\n\nfunction animatePos( locs ) {\n\n  let clock = new THREE.Clock();\n  let duration = 2;\n  let lastTime = 0;\n  let tick = 0;\n\n  let anim = () => {\n    let elapsed = clock.getElapsedTime();\n    let delta = elapsed - lastTime; //clock.getDelta( );\n    let normalized = elapsed / duration;\n    tick += delta;\n\n    // console.log(delta, tick, elapsed);\n    if (tick < 0) tick = 0;\n    if (delta > 0 && elapsed < duration) {\n      // let scale = 2 - Math.pow(normalized, 8);\n      for (var i = 0; i < locs.children.length; i++) {\n        locs.children[i].position.lerp(locs.children[i].positions.TARGET, normalized);\n      }\n    } else if (elapsed > duration) {\n\n\n    }\n\n    lastTime = elapsed;\n    if (elapsed < duration * 1.1) {\n      // still running\n    }\n    else{\n      clearInterval(posAnim)\n    }\n  }\n let posAnim = setInterval(anim,1)\n  // window.addEventListener(\"animationFrame\", anim);\n}\n\nfunction animateColors() {\n  let resetOnce = true;\n  // console.log(\"one country\",this );\n  let clock = new THREE.Clock();\n  let duration = 0.5;\n  let lastTime = 0;\n  let tick = 0;\n\n  let anim = ( ) => {\n    if (currentLevel !== \"NEAR\") {\n      let elapsed = clock.getElapsedTime();\n      let delta = elapsed - lastTime; //clock.getDelta( );\n      let normalized = elapsed / duration;\n      tick += delta;\n      if (delta > 0 && elapsed < duration) {\n        // let scale = 2 - Math.pow(normalized, 8);\n\n        // cityClusters[\"Austin United States\"][colorTrack[\"Austin United States\"]].material.opacity = 1-normalized;\n        for (var city in cityClusters) {\n          if (cityClusters.hasOwnProperty(city)) {\n            if (cityClusters[city].length > 2) {\n              let dir = colorTrack[city].dir === 1 ? 0 : 1;\n              // console.log(Math.abs(1 - (dir+normalized)) );\n              try {\n                cityClusters[city][colorTrack[city].current - 1].material.opacity = Math.abs(dir - normalized);\n                // console.log(cityClusters[\"Austin United States\"].length, colorTrack[\"Austin United States\"].current, Math.abs(dir - normalized) );\n\n              } catch (e) {\n                console.log(colorTrack[city].current, cityClusters[city].length);\n              } finally {\n\n              }\n            }\n\n          }\n        }\n      } else if (elapsed > duration) {\n\n\n      }\n\n      lastTime = elapsed;\n      if (elapsed > duration * 1.01) {\n        // times up reset\n        for (var city in cityClusters) {\n          if (cityClusters.hasOwnProperty(city)) {\n            if (cityClusters[city].length > 2) {\n              if (1 === colorTrack[city].current) {\n                colorTrack[city].dir = 1;\n              } else if (cityClusters[city].length === colorTrack[city].current) {\n                colorTrack[city].dir = -1;\n              }\n              colorTrack[city].current += colorTrack[city].dir;\n            }\n          }\n        }\n        resetOnce = true;\n        clock.stop()\n        clock.start();\n      }\n    } else {\n      // reset all opacity;\n      if (resetOnce) {\n        console.log(\"Reseting opcaity\");\n        for (var city in cityClusters) {\n          if (cityClusters.hasOwnProperty(city)) {\n            for (var i = 0; i < cityClusters[city].length; i++) {\n              cityClusters[city][i].material.opacity = 1;\n              colorTrack[city].current = cityClusters[city].length;\n              colorTrack[city].current = -1;\n            }\n          }\n        }\n        resetOnce = false;\n      }\n    }\n  };\n  window.addEventListener(\"animationFrame\", anim);\n}\n\n\nfunction distanceFromCenter(center, {\n  lat,\n  lng\n}) {\n  return Math.sqrt(Math.pow(lat - center[0], 2) + Math.pow(lng - center[1], 2));\n}\n\n\n\nconst locationGeometries = {\n  NEAR: new THREE.CircleBufferGeometry(0.4, 24),\n  MID: new THREE.CircleBufferGeometry(1, 24),\n  FAR: new THREE.CircleBufferGeometry(1.2, 32),\n  DEFAULT: new THREE.CircleBufferGeometry(1.5, 32),\n  DEFAULT_HQ: new THREE.CircleBufferGeometry(2.4, 32),\n}\n\n\n// }","import React from 'react';\nimport PropTypes from 'prop-types';\nimport * as THREE from 'three';\n\nconst DEBUG = !true\n\nlet svgFillNone = {\n  'fill': 'none'\n}\nlet svgStroke = {\n  'fill': 'none',\n  'stroke' : '#fff',\n  'strokeWidth': \"5px\",\n}\nlet svgStrokeNone = {\n  'stroke' : 'none'\n}\nlet svgFill = {\n  'stroke' : 'none',\n  'fill': \"#fff\"\n}\nlet svg = {\n  'position': 'absolute'\n\n}\n\nlet cursorMaterial = new THREE.MeshBasicMaterial( { color: 0xff0000 , side: THREE.DoubleSide, wireframe: false } );\n\nexport default class Cursor extends React.Component {\n  constructor( props ) {\n    super( props )\n    if ( DEBUG ) console.log( `Cursor`, props );\n\n    this.origin = props.origin || new THREE.Vector3( )\n    this.containerID = props.containerID\n    this.diameter = props.diameter || 80\n\n    let originGeo = new THREE.SphereGeometry(10, 20, 10);\n    this.originObject = new THREE.Mesh(originGeo);\n    this.originObject.position.set(this.origin.x, this.origin.y, this.origin.z);\n\n    let cursorElement = document.getElementById(\"containerID\")\n    this.cursorElement = React.createRef( )\n    this.state = {\n      style:{\n        \"top\":`${this.props.size.height - (this.diameter) }px`,\n        \"left\": `${this.props.size.widht - (this.diameter) }px`,\n        \"width\": `${this.diameter}px`,\n        \"height\": `${this.diameter}px`,\n        'position': 'absolute',\n      }\n    }\n    window.addEventListener( 'resize', this.centerOnOrgin.bind(this), false )\n  }\n\n  componentDidMount( ){\n    setTimeout(this.centerOnOrgin.bind(this),300)\n  }\n\n  centerOnOrgin( ) {\n    let screenOriginPos = this.toScreenPosition(  )\n    if ( screenOriginPos ){\n\n      this.props.hoist.position = {\n        x: screenOriginPos.x ,\n        y: screenOriginPos.y + (this.diameter/2),\n      }\n      this.props.hoist.edge = {\n        x: screenOriginPos.x + (this.diameter/2),\n        y: screenOriginPos.y + (this.diameter/2),\n      }\n\n      let style = {\n        \"top\":`${screenOriginPos.y - (this.diameter/2) }px`,\n        \"left\": `${screenOriginPos.x - (this.diameter/2) }px`,\n        \"width\": `${this.diameter}px`,\n        \"height\": `${this.diameter}px`,\n        'position': 'absolute',\n        'pointerEvents':'none',\n      }\n\n      this.setState({style:style})\n    }\n\n  }\n  toScreenPosition (obj = this.originObject, camera = this.props.camera ) {\n    // if ( DEBUG ) console.log( `Cursor.toScreenPosition`, obj, camera);\n\n    if ( camera ) {\n      var vector = new THREE.Vector3( )\n      // TODO: need to update this when resize window\n      var widthHalf = 0.5*this.props.size.width\n      var heightHalf = 0.5*this.props.size.height\n\n      obj.updateMatrixWorld()\n      vector.setFromMatrixPosition(obj.matrixWorld)\n      vector.project(camera)\n\n      vector.x = ( vector.x * widthHalf ) + widthHalf\n      vector.y = - ( vector.y * heightHalf ) + heightHalf\n\n      return {\n          x: vector.x,\n          y: vector.y\n      }\n    }\n\n  }\n\n  render( ) {\n    return (\n      <div className=\"circle\" id=\"cursor\" ref={this.cursorElement} style={this.state.style}>\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 150 150\" style={svg}>\n          <g id=\"Group_7902\" data-name=\"Group 7902\" transform=\"translate(-949 -1145)\">\n            <g id=\"Path_774\" data-name=\"Path 774\" className=\"cls-1\" transform=\"translate(949 1145)\" style={svgFillNone}>\n              <path className=\"cls-4\" d=\"M 75 12 C 40.26168823242188 12 12 40.26168823242188 12 75 C 12 109.7383117675781 40.26168823242188 138 75 138 C 109.7383117675781 138 138 109.7383117675781 138 75 C 138 40.26168823242188 109.7383117675781 12 75 12 M 75 0 C 116.4213409423828 0 150 33.57865905761719 150 75 C 150 116.4213409423828 116.4213409423828 150 75 150 C 33.57865905761719 150 0 116.4213409423828 0 75 C 0 33.57865905761719 33.57865905761719 0 75 0 Z\" style={svgFill}/>\n            </g>\n            <g id=\"Group_7898\" data-name=\"Group 7898\" transform=\"translate(443 210)\" style={svgFillNone}>\n              <line id=\"Line_4\" data-name=\"Line 4\" className=\"cls-2\" x1=\"50\" transform=\"translate(556.5 1010.6)\" style={svgStroke}/>\n              <line id=\"Line_1404\" data-name=\"Line 1404\" className=\"cls-2\" x1=\"50\" transform=\"translate(581.5 985.6) rotate(90)\" style={svgStroke}/>\n            </g>\n          </g>\n        </svg>\n      </div>\n    )\n  }\n}\n","import React from 'react'\nimport './main.scss'\n\nconst DEBUG = !true\nconst ZoomBar = ( props ) => {\n    const increment = 1\n    let onZoom = ( event ) =>{\n      event.preventDefault()\n      if (event.currentTarget.className === 'plus') props.onChange( -increment )\n      else props.onChange( +increment )\n    }\n    // let zoomOut = ( event ) =>{\n    //   event.preventDefault()\n    //\n    // }\n    const zoomLevel = {\"width\": `${props.zoomLevel}%`}\n    return (\n        <div id=\"zoom-bar\" >\n          <div  className=\"bar\" style={zoomLevel}/>\n            <button className=\"plus\" onClick={onZoom.bind(this)}>+</button>\n            <button className=\"minus\" onClick={onZoom.bind(this)}>-</button>\n        </div>\n    )\n}\n\nexport default ZoomBar;\n","import React, { Component } from 'react'\nimport * as THREE from 'three'\n\nimport VistaColors from '../Colors'\nimport Stats from 'stats-js'\nimport {OrbitControls} from './lib/OrbitControlsVista.js'\nimport TWEEN from './lib/Tween.js'\n\nimport * as Geographer from './Geographer'\nimport Earth from './Earth'\nimport Loc from './Location'\nimport Cursor from './Cursor'\nimport ZoomBar from './ZoomBar'\n\nimport threads from 'threads'\n\n//tmp: commenting this out because missing package, also not being used here\n//import Ozai from './worker'\n\nimport './main.scss'\n// https://daveceddia.com/useeffect-hook-examples/\n\n\n\n\nconst DEBUG = !true\n\nconst radius = 228\nvar geo = new THREE.SphereGeometry(3)\nvar mat = new THREE.MeshBasicMaterial({color: 0xff0000});\nvar mesh1 = new THREE.Mesh(geo, mat);\nvar mesh2 = new THREE.Mesh(geo, mat);\n\nlet shouldUpdateLocations = true\nlet origin = new THREE.Vector3(0, 0, 0)\nlet raycaster = new THREE.Raycaster( )\n\nlet zoomDirection = 0;\nlet lastZoom = 0;\nlet thresholds = {\n              NEAR: 0.11,\n              MID: 0.4,\n              FAR: 0.55\n            }\n\nlet zoomFlags = {\n              NEAR: true,\n              MID: true,\n              FAR: true,\n              DEFAULT: true\n            }\n\nconst resetTexture = ( keep, textures ) => {\n  for (var texture in textures) {\n    if (textures.hasOwnProperty( texture )) {\n      textures[texture].visible = false;\n    }\n  }\n\n  textures[keep].visible = true;\n\n}\nconst resetZoomFlags = ( keep ) => {\n  for (var level in zoomFlags) {\n    if (zoomFlags.hasOwnProperty( level )) {\n      zoomFlags[level] = true\n    }\n  }\n  zoomFlags[keep] = false\n}\nlet round = ( num, numberDecimals )=>{\n  let decimalCount = 1\n  for (var i = 0; i < numberDecimals; i++) {\n    decimalCount *= 10\n  }\n  if ( typeof num === \"number\") {\n    return Math.round(num * decimalCount )/ decimalCount\n  }\n  else if (num instanceof Array ) {\n    let tempArr = []\n    for (var e = 0; e < num.length; e++) {\n      tempArr[e] = Math.round(num[e] * decimalCount )/ decimalCount\n    }\n    return tempArr\n  }\n}\n\n\nclass Globe extends Component {\n  constructor( props ) {\n    super( props )\n    this.locations = new Loc( { radius, origin } )\n    this.cursor = { }\n    this.state = {\n      size: {},\n      zoom: 80\n    }\n    this.lastActiveState = true\n\n    // firstWorker = new Worker('worker.js')\n    this.shouldRecalculate = true\n    this.lastEventTimestamp = null\n\n    this.firstLoad = true\n\n    // instance props for click-to-rotate & camera tweening\n    this.globeWasTapped = null;\n    this.isCamTweening = false;\n    this.camTweenDuration = 300;\n    this.postCamTweenDelay = 300;\n    this.center = new THREE.Vector3(0,0,0);\n\n    // firstWorker = new Worker('worker.js')\n  }\n\n  componentDidMount( ) {\n      this.sceneSetup( )\n      this.addCustomSceneObjects( )\n      this.startAnimationLoop( )\n      window.addEventListener('resize', this.handleWindowResize)\n      this.handleWindowResize( )\n      this.firstLoad = false\n      this.thread = threads.spawn(function(input, done) {\n        // Everything we do here will be run in parallel in another execution context.\n        // Remember that this function will be executed in the thread's context,\n        // so you cannot reference any value of the surrounding code.\n        if ( DEBUG ) console.log(\"webworker!\",THREE)\n        let THREEjs = THREE\n        let raycaster = new THREEjs.Raycaster( )\n        function getIntersectionWithEarth( _mouse ) {\n\n          let mouse = {\n            x: ((_mouse.x - 1) / input.clientWidth) * 2 - 1,\n            y: -((_mouse.y - 1) / input.clientHeight) * 2 + 1\n          }\n          raycaster.setFromCamera(mouse, input.camera)\n\n          return raycaster.intersectObject( input.object )\n        }\n        done({ a : getIntersectionWithEarth(input.a), b : getIntersectionWithEarth(input.b) });\n      });\n  }\n\n  componentWillUnmount( ) {\n      window.removeEventListener('resize', this.handleWindowResize)\n      window.cancelAnimationFrame(this.requestID)\n      this.controls.dispose( )\n  }\n\n  shouldComponentUpdate( ) {\n    return true\n  }\n\n  // Standard scene setup in Three.js. Check \"Creating a scene\" manual for more information\n  // https://threejs.org/docs/#manual/en/introduction/Creating-a-scene\n  sceneSetup = ( ) => {\n    if ( DEBUG ) console.log(\"Globe.sceneSetup\")\n      // get container dimensions and use them for scene sizing\n      const width = this.mount.clientWidth\n      const height = this.mount.clientHeight\n\n      this.scene = new THREE.Scene( )\n      this.camera = new THREE.PerspectiveCamera(\n          45, // fov = field of view\n          width / height, // aspect ratio\n          0.1, // near plane\n          20000 // far plane\n      )\n      this.camera.position.z = 600 // is used here to set some distance from a cube that is located at z = 0\n      // OrbitControls allow a camera to orbit around the object\n      // https://threejs.org/docs/#examples/controls/OrbitControls\n      this.renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true })\n      this.renderer.setClearColor(new THREE.Color(VistaColors.general.Dark_Blue), 1)\n      this.renderer.setSize( width, height )\n\n      //event listener on canvas for double-clicking to rotate camera\n      this.renderer.domElement.addEventListener('dblclick',this.clickToRotate.bind(this));\n      this.renderer.domElement.addEventListener('touchstart', this.touchToRotate.bind(this));\n\n      this.mount.appendChild( this.renderer.domElement ) // mount using React ref\n      this.controls = new OrbitControls( this.camera, this.renderer.domElement )\n      this.controls.enablePan = false\n      this.controls.minDistance = radius * 1.2\n      this.controls.maxDistance = radius * 3.6\n\n      this.controls.addEventListener( \"end\", this.touchEnd.bind( this ) )\n      this.controls.addEventListener(\"change\", this.controlsChange.bind( this ) )\n\n  }\n\n  // Here should come custom code.\n  // Code below is taken from Three.js BoxGeometry example\n  // https://threejs.org/docs/#api/en/geometries/BoxGeometry\n  addCustomSceneObjects = ( ) => {\n    if ( DEBUG ) console.log(\"Globe.addCustomSceneObjects\")\n    // lights\n    this.scene.add( new THREE.AmbientLight(0xFFFFFF) )\n\n    // earth objects\n    this.earth = new Earth( { radius, origin, color: VistaColors.general.Dark_Blue } )\n    this.scene.add(this.earth.outline)\n    this.scene.add(this.earth.sphere)\n    this.scene.add(this.earth.earth)\n    //temp\n    if( DEBUG ){\n      this.earth.earth.add(mesh1);\n      this.earth.earth.add(mesh2);\n    }\n    // locations\n    this.scene.add( this.locations.group )\n  }\n\n  startAnimationLoop = ( ) => {\n\n    this.renderer.render( this.scene, this.camera )\n    TWEEN.update( )\n    this.controls.update( )\n\n    this.lastActiveState = this.props.active\n    this.requestID = window.requestAnimationFrame(this.startAnimationLoop)\n  }\n\n  stopAnimationLoop = ( ) => {\n    window.cancelAnimationFrame(this.requestID)\n    this.lastActiveState = this.props.active\n  }\n\n  touchEnd( e ) {\n\n    if(this.isCamTweening) return; //allow camTween to handle\n\n    const state = e.target.getState();\n\n    if(state ===  -1 || state ===  3 ){\n      if ( DEBUG ) console.log(\"Globe.touchend:zooming\", e )\n      window.clearTimeout(this.lastZoomTimeout)\n      this.lastZoomTimeout = window.setTimeout( this.offloadWork.bind( this ) , 500)\n    }\n    else if(state ===  0 || state ===  4){//panning\n      this.offloadWork( )\n    }\n  }\n\n  clickToRotate( e ) {\n\n\t\tlet intersects = this.getIntersectionWithEarth( e )\n\n    if(intersects[0]) {\n      let item    = intersects[0]\n        , point   = item.point\n        , camDist = this.camera.position.length( )\n        , target  = new THREE.Vector3( )\n        ;\n\n\n      target.copy(item.point).normalize( ).multiplyScalar( camDist )\n      this.tweenCamera( target )\n\n      // note: this code sends the camera to position directly, with no tween\n      //  this.camera.position.copy(point).normalize().multiplyScalar(camDist);\n      //  this.controls.update();\n    }\n  }\n\n  touchToRotate( e ) {\n\n    let touch = {\n      x : e.touches[0].clientX,\n      y : e.touches[0].clientY\n    };\n\n    if(!this.globeWasTapped) {\n      if(DEBUG) console.log('single-touch detected');\n      this.globeWasTapped = setTimeout(()=>{\n        this.globeWasTapped = null;\n      }, 300);\n    } else {\n      if(DEBUG) console.log('double-touch detected');\n      clearTimeout(this.globeWasTapped);\n      this.globeWasTapped = null;\n      this.clickToRotate(touch);\n    }\n  }\n\n  tweenCamera(target) {\n\n    this.isCamTweening = true;\n    TWEEN.removeAll();\n\n    let camTween = new TWEEN.Tween(this.camera.position)\n      .to(target, this.camTweenDuration)\n      .easing(TWEEN.Easing.Quadratic.InOut)\n      .start()\n      .onComplete(function() {\n        setTimeout(function(){\n          this.isCamTweening = false;\n          this.offloadWork();\n        }.bind(this), this.postCamTweenDelay);\n      }.bind(this));\n  }\n\n  controlsChange( e ) {\n\n    if(this.isCamTweening) return; //allow tweenCamera to handle\n\n    const state = e.target.getState();\n\n    if(state ===  -1 || state ===  4  ) {\n      if ( DEBUG ) console.log(`Globe.controlsChange`, e)\n      this.onZoom( e )\n    }\n    // 0 - panning\n    // 4 zoming in touch\n    // 3 panning in touch\n  }\n\n  onZoom( e )  {\n    if( !window.BrowserDetect.mobile ){\n      this.setState({ zoom: 100-round(this.controls.getZoomPercent( ) * 100, 3) })\n    }\n    let zoom = round(e.target.getZoomPercent( ),2)?round(e.target.getZoomPercent( ),2):0.01\n    if ( zoom > lastZoom ) zoomDirection = -1\n    else if ( zoom < lastZoom ) zoomDirection = 1\n\n    this.earth.maps[\"countries\"].mesh.material.opacity =  (Math.pow(zoom, 0.2)*0.3)+0.11\n    this.earth.maps[\"usa_states\"].mesh.material.opacity =  (Math.pow(1-zoom, 0.2)*0.3)+0.1\n\n    if ( DEBUG ) console.log(\"\\tonZoom\", zoom , zoomDirection , this.camera.zoom )\n\n    if(zoom < thresholds.NEAR &&  zoomFlags.NEAR ) {\n      if ( DEBUG ) console.log(\"\\n\\tNEAR\\n\", zoom < thresholds.NEAR, zoomFlags.NEAR)\n      this.locations.updateZoom(\"NEAR\")\n      this.controls.rotateSpeed = 0.15;\n      resetTexture(\"NEAR\", this.earth.worldMapTextures)\n      resetZoomFlags(\"NEAR\")\n      console.log(\"ONLy ONCE\")\n    }\n    else if(zoom > thresholds.NEAR && zoom < thresholds.MID &&  zoomFlags.MID ) {\n      if ( DEBUG ) console.log(\"\\n\\tMID\\n\", zoom > thresholds.NEAR , zoom < thresholds.MID ,  zoomFlags.MID)\n      this.locations.updateZoom(\"MID\")\n      this.controls.rotateSpeed = 0.5\n      resetTexture(\"MID\", this.earth.worldMapTextures)\n      resetZoomFlags(\"MID\")\n\n    }\n    else if (zoom > thresholds.MID && zoom < thresholds.FAR &&  zoomFlags.FAR ) {\n      if ( DEBUG ) console.log(\"\\n\\tFAR\\n\", zoom > thresholds.MID , zoom < thresholds.FAR ,  zoomFlags.FAR )\n      this.locations.updateZoom(\"FAR\")\n      this.controls.rotateSpeed = 0.8\n      resetTexture(\"FAR\", this.earth.worldMapTextures)\n      resetZoomFlags(\"FAR\")\n\n    }\n    else if ( zoom > thresholds.FAR && zoomFlags.DEFAULT ) {\n      if ( DEBUG ) console.log(\"\\n\\tDEFAULT\\n\", zoom > thresholds.FAR , zoomFlags.DEFAULT)\n      this.controls.rotateSpeed = 1\n      this.locations.updateZoom(\"DEFAULT\")\n      resetTexture(\"DEFAULT\", this.earth.worldMapTextures)\n      resetZoomFlags(\"DEFAULT\")\n\n    }\n    lastZoom = zoom\n\n  }\n  offloadWork( ){\n    if( window.Worker && false ){\n      let firstWorker = new Worker('worker.js')\n      let obj = { }\n      Object.assign( obj, { task:\"getIntersectionWithEarth\", params:{_mouse:this.cursor.position, _mouse2:this.cursor.edge, camera: this.camera, object:this.earth.sphere , raycaster}} )\n      firstWorker.postMessage(  obj )\n      console.log('Message posted to worker', firstWorker)\n\n      firstWorker.onmessage = function( e ) {\n        console.log('Message received from worker', e )\n        this.getTargetLatLong(e.data[0], e.data[1] )\n      }\n      firstWorker.onerror = function( e ) {\n        console.log('error from worker', e )\n      }\n    } else {\n\n\n      let target = this.getIntersectionWithEarth(this.cursor.position)\n      let targetEdge = this.getIntersectionWithEarth(this.cursor.edge)\n      this.getTargetLatLong(target, targetEdge)\n    }\n    this.lastEventTimestamp = new Date( ).getTime( )\n  }\n\n  getIntersectionWithEarth( _mouse, camera = this.camera, object = this.earth.sphere ) {\n\n    let mouse = {\n      x: ((_mouse.x - 1) / this.mount.clientWidth) * 2 - 1,\n      y: -((_mouse.y - 1) / this.mount.clientHeight) * 2 + 1\n    }\n    raycaster.setFromCamera(mouse, camera)\n\n    return raycaster.intersectObject( object )\n  }\n\n  getTargetLatLong( target, targetEdge ) {\n\n    let center = Geographer.getEventCenter.call(target[0],  radius)\n    let edge = Geographer.getEventCenter.call(targetEdge[0], radius)\n    if( DEBUG ){\n      var c = Geographer.longLatToVect3([center[1],center[0]])//[center[1],center[0]]\n      mesh1.position.set(c.x,c.y,c.z);\n      var e = Geographer.longLatToVect3([edge[1],edge[0]])\n      mesh2.position.set(e.x,e.y,e.z);\n    }\n    let currentCursorRadius = Math.abs( center[1] - edge[1] )\n    if (this.earth.maps[\"countries\"]) {\n\n      let companiesNearBy = this.locations.getNearByCompanies(center, currentCursorRadius)\n      let filterMessage = 'No Companies found'\n      if ( companiesNearBy.loc.city ) {\n        filterMessage = `Companies in ${companiesNearBy.loc.city}, ${companiesNearBy.loc.state?companiesNearBy.loc.state+' ':''}${companiesNearBy.loc.country}`\n      }\n      else if ( companiesNearBy.loc.country ) {\n        filterMessage = `Companies near ${companiesNearBy.loc.state?companiesNearBy.loc.state+', ':''}${companiesNearBy.loc.country}`\n      }\n\n      if ( DEBUG ) console.log(`Globe.you landed in `, companiesNearBy.loc.country, companiesNearBy.loc.state, '\\n and this comapnies are near by', companiesNearBy.list)\n      this.props.updateByIDs(companiesNearBy.list, filterMessage)\n\n    }\n\n  }\n\n  handleWindowResize = ( ) => {\n\n      const width = this.mount.clientWidth\n      const height = this.mount.clientHeight\n\n      this.renderer.setSize( width, height )\n      this.camera.aspect = width / height\n      // Note that after making changes to most of camera properties you have to call\n      // .updateProjectionMatrix for the changes to take effect.\n      this.camera.updateProjectionMatrix( )\n      this.setState({ size: { width, height } })\n\n  }\n\n  zoomUpdate( dir ) {\n    if( !window.BrowserDetect.mobile ){\n      this.setState({ zoom: 100-round(this.controls.zoomBar( dir ) * 100, 3) })\n    }\n  }\n\n  render( ) {\n    if ( DEBUG ) console.log(\"Globe. Render\")\n\n    if ( !this.props.active && this.props.active !== this.lastActiveState ) this.stopAnimationLoop( )\n    else if( this.props.active && this.props.active !== this.lastActiveState) this.startAnimationLoop( )\n    this.locations.update(this.props.companies)\n    // const loca = ( <Locat locations={this.props.companies} origin={origin} radius={radius} /> )\n    return (<div id=\"globe\"  ref={ref => (this.mount = ref)} className={this.props.className}>\n      <Cursor size={this.state.size} camera={this.camera} containerID=\"globe\" hoist={this.cursor} />\n      {window.BrowserDetect.mobile ? null: <ZoomBar zoomLevel={this.state.zoom} onChange={this.zoomUpdate.bind( this )} />}\n    </div>)\n  }\n}\n\n\nexport default Globe\n","import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport './Picker.scss';\n\nclass PickerColumn extends Component {\n  static propTypes = {\n    options: PropTypes.array.isRequired,\n    name: PropTypes.string.isRequired,\n    value: PropTypes.any.isRequired,\n    itemHeight: PropTypes.number.isRequired,\n    columnHeight: PropTypes.number.isRequired,\n    onChange: PropTypes.func.isRequired,\n    onClick: PropTypes.func.isRequired\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isMoving: false,\n      startTouchY: 0,\n      startScrollerTranslate: 0,\n      ...this.computeTranslate(props)\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (this.state.isMoving) {\n      return;\n    }\n    this.setState(this.computeTranslate(nextProps));\n  }\n\n  computeTranslate = (props) => {\n    const {options, value, itemHeight, columnHeight} = props;\n    let selectedIndex = options.indexOf(value);\n    if (selectedIndex < 0) {\n      // throw new ReferenceError();\n      console.warn('Warning: \"' + this.props.name+ '\" doesn\\'t contain an option of \"' + value + '\".');\n      this.onValueSelected(options[0]);\n      selectedIndex = 0;\n    }\n    return {\n      scrollerTranslate: columnHeight / 2 - itemHeight / 2 - selectedIndex * itemHeight,\n      minTranslate: columnHeight / 2 - itemHeight * options.length + itemHeight / 2,\n      maxTranslate: columnHeight / 2 - itemHeight / 2\n    };\n  };\n\n  onValueSelected = (newValue) => {\n    this.props.onChange(this.props.name, newValue);\n  };\n\n  handleTouchStart = (event) => {\n    const startTouchY = event.targetTouches[0].pageY;\n    this.setState(({scrollerTranslate}) => ({\n      startTouchY,\n      startScrollerTranslate: scrollerTranslate\n    }));\n  };\n\n  handleTouchMove = (event) => {\n    event.preventDefault();\n    event.stopPropagation();//added this\n    const touchY = event.targetTouches[0].pageY;\n    this.setState(({isMoving, startTouchY, startScrollerTranslate, minTranslate, maxTranslate}) => {\n      if (!isMoving) {\n        return {\n          isMoving: true\n        }\n      }\n\n      let nextScrollerTranslate = startScrollerTranslate + touchY - startTouchY;\n      if (nextScrollerTranslate < minTranslate) {\n        nextScrollerTranslate = minTranslate - Math.pow(minTranslate - nextScrollerTranslate, 0.8);\n      } else if (nextScrollerTranslate > maxTranslate) {\n        nextScrollerTranslate = maxTranslate + Math.pow(nextScrollerTranslate - maxTranslate, 0.8);\n      }\n      return {\n        scrollerTranslate: nextScrollerTranslate\n      };\n    });\n  };\n\n  handleTouchEnd = (event) => {\n    if (!this.state.isMoving) {\n      return;\n    }\n    this.setState({\n      isMoving: false,\n      startTouchY: 0,\n      startScrollerTranslate: 0\n    });\n    setTimeout(() => {\n      const {options, itemHeight} = this.props;\n      const {scrollerTranslate, minTranslate, maxTranslate} = this.state;\n      let activeIndex;\n      if (scrollerTranslate > maxTranslate) {\n        activeIndex = 0;\n      } else if (scrollerTranslate < minTranslate) {\n        activeIndex = options.length - 1;\n      } else {\n        activeIndex = - Math.floor((scrollerTranslate - maxTranslate) / itemHeight);\n      }\n      this.onValueSelected(options[activeIndex]);\n    }, 0);\n  };\n\n  handleTouchCancel = (event) => {\n    if (!this.state.isMoving) {\n      return;\n    }\n    this.setState((startScrollerTranslate) => ({\n      isMoving: false,\n      startTouchY: 0,\n      startScrollerTranslate: 0,\n      scrollerTranslate: startScrollerTranslate\n    }));\n  };\n\n  handleItemClick = (option) => {\n    if (option !== this.props.value) {\n      this.onValueSelected(option);\n    } else {\n      this.props.onClick(this.props.name, this.props.value);\n    }\n  };\n\n  renderItems() {\n    const {options, itemHeight, value} = this.props;\n    return options.map((option, index) => {\n      const style = {\n        height: itemHeight + 'px',\n        lineHeight: itemHeight + 'px'\n      };\n      const className = `picker-item${option === value ? ' picker-item-selected' : ''}`;\n      return (\n        <div\n          key={index}\n          className={`${className} ${option.toLowerCase().replace(/ /g,\"-\").replace(/,/g,\"\").replace(/&/g,\"n\")}`}\n          style={style}\n          onClick={() => this.handleItemClick(option)}>{option}</div>\n      );\n    });\n  }\n\n  render() {\n    const translateString = `translate3d(0, ${this.state.scrollerTranslate}px, 0)`;\n    const style = {\n      MsTransform: translateString,\n      MozTransform: translateString,\n      OTransform: translateString,\n      WebkitTransform: translateString,\n      transform: translateString\n    };\n    if (this.state.isMoving) {\n      style.transitionDuration = '0ms';\n    }\n    return(\n      <div className=\"picker-column\">\n        <div\n          className=\"picker-scroller\"\n          style={style}\n          onTouchStart={this.handleTouchStart}\n          onTouchMove={this.handleTouchMove}\n          onTouchEnd={this.handleTouchEnd}\n          onTouchCancel={this.handleTouchCancel}>\n          {this.renderItems()}\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default class Picker extends Component {\n  static propTyps = {\n    optionGroups: PropTypes.object.isRequired,\n    valueGroups: PropTypes.object.isRequired,\n    onChange: PropTypes.func.isRequired,\n    onClick: PropTypes.func,\n    itemHeight: PropTypes.number,\n    height: PropTypes.number\n  };\n\n  static defaultProps = {\n    onClick: () => {},\n    itemHeight: 36,\n    height: 216\n  };\n\n  renderInner() {\n    const {optionGroups, valueGroups, itemHeight, height, onChange, onClick} = this.props;\n    const highlightStyle = {\n      height: itemHeight,\n      marginTop: -(itemHeight / 2)\n    };\n    const columnNodes = [];\n    for (let name in optionGroups) {\n      columnNodes.push(\n        <PickerColumn\n          key={name}\n          name={name}\n          options={optionGroups[name]}\n          value={valueGroups[name]}\n          itemHeight={itemHeight}\n          columnHeight={height}\n          onChange={onChange}\n          onClick={onClick} />\n      );\n    }\n    return (\n      <div className=\"picker-inner\">\n        {columnNodes}\n        <div className=\"picker-highlight\" style={highlightStyle}></div>\n      </div>\n    );\n  }\n\n  render() {\n    const style = {\n      height: this.props.height\n    };\n\n    return (\n      <div className=\"picker-container\" style={style}>\n        {this.renderInner()}\n      </div>\n    );\n  }\n}\n","import React, { useState, useRef } from 'react'\nimport Picker from './Picker'\nimport './main.scss'\n// import { all } from 'q';\nconst DEBUG = !true\n\nconst Filter = ( { companies, ...props } ) =>{\n    \n  const [valueGroups, setValueGroups] = useState({ group: 'All', vertical: 'All' })\n  const [optionGroups, setOptionGroups] = useState({ group: ['All', 'Former', 'Current'], vertical: props.industryVerticals })\n\n  const updateGroup = (e) =>{\n    const newVal = e.target.value\n    console.log('Active Group: ', newVal);\n    props.updateByGroup(newVal)\n  }\n\n  const updateVertical = (e) =>{\n    const newVal = e.target.value\n    console.log('Active Industry Vertical: ', newVal);\n    props.updateByVertical(newVal)\n  }\n\n  // Update the value in response to user picking event\n  const handleChange = (name, value) =>{\n      setValueGroups({\n        ...valueGroups,\n        [name]: value\n      })\n    if (name === 'vertical')\n      props.updateByVertical(value)\n    else if (name === 'group')\n      props.updateByGroup(value)\n  }\n    \n    let verticalsDropdown = (\n      <select className=\"vertical\" onChange={updateVertical}>\n        {props.industryVerticals.map((vertical, i) => {\n          return (\n            <option key={i} value={vertical} onChange={updateVertical}>{vertical}</option>\n          )\n        })}\n      </select>\n    )\n\n    let groupDropdown = (\n      <select className=\"group\" onChange={updateGroup}>\n        <option key=\"0\" value=\"All\">All</option>\n        <option key=\"1\" value=\"Former\">Former</option>\n        <option key=\"2\" value=\"Current\">Current</option>\n      </select>\n    )\n    \n    const expand = ( e ) =>{\n      let thisElement = e.currentTarget.parentElement.children['filter-expand']\n      let picker = e.currentTarget.parentElement.children[1]\n      thisElement.classList.toggle(\"active\")\n      // if(thisElement.classList.contains(\"active\")){\n      //   filter.current.innerHTML = `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 38 42\" ><g><g><polygon  points=\"19 0 0 0 0 4 13 21 19 21 25 21 38 4 38 0 19 0\"/><polygon  points=\"19 23 13 23 13 36 25 42 25 23 19 23\"/></g></g></svg> Filter`\n      // }\n      // else{\n      //   filter.current.innerHTML =  `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 38 42\" ><g><g><polygon  points=\"19 0 0 0 0 4 13 21 19 21 25 21 38 4 38 0 19 0\"/><polygon  points=\"19 23 13 23 13 36 25 42 25 23 19 23\"/></g></g></svg> Filter`\n      // }\n      picker.classList.toggle(\"mobile-open\")\n      \n    }\n    \n    const filter = useRef()\n    if ( DEBUG ) console.log(\"Filter\")\n    return (\n      <div id=\"filter\" className={props.className}>\n        <div id='filter-expand' className=\"expand-btn\" onClick={expand} ref={filter}> \n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 38 42\" ><g><g><polygon  points=\"19 0 0 0 0 4 13 21 19 21 25 21 38 4 38 0 19 0\"/><polygon  points=\"19 23 13 23 13 36 25 42 25 23 19 23\"/></g></g></svg>\n        Filter  \n        </div>\n        <Picker\n          optionGroups={optionGroups}\n          valueGroups={valueGroups}\n          onChange={handleChange}\n          height={150}\n          itemHeight={20} />\n\n      </div>\n\n    )\n}\n\nexport default Filter ","import React, { useRef, useEffect, useState} from 'react'\nconst DEBUG = false\nconst Hq_location = ( props ) => {\n    const maxCharacters = 12\n    const doubleLine = {\n      transform: `translateY(-0.5em)`\n    }\n    const _country = props.loc.country === \"United States\"? \"USA\": props.loc.country\n    const l = `${props.loc.city}, ${props.loc.state?props.loc.state+',':''} ${_country}`\n\n    const LocationLabel = ( {city, country, state} )=>{\n      \n      if (l.length < maxCharacters) {\n        return (\n          <g>\n          <text className=\"title\" x=\"0\" y=\"0\"  textAnchor=\"middle\" >{l}</text>\n          <text className=\"sub-title\" x=\"0\" y=\"0\" dy=\"1em\" textAnchor=\"middle\" >headquarters</text>\n          </g>\n        )\n      }\n      else{\n        return(\n          <g>\n          <text className=\"title\" x=\"0\" y=\"0\"  style={doubleLine} textAnchor=\"middle\" >\n            <tspan x=\"0\" y=\"0\" dy=\"0\">{city},</tspan>\n            <tspan x=\"0\" y=\"0\" dy=\"1em\">{state?state+', ':''}{_country}</tspan>\n          </text>\n          <text className=\"sub-title\" x=\"0\" y=\"0\" dy=\"2.2em\" textAnchor=\"middle\" >headquarters</text>\n          </g>\n        )\n      }\n  }\n    let rad = props.loc.city.length>maxCharacters-3? maxCharacters/2 : props.radius\n     rad = _country.length>maxCharacters-3? maxCharacters/2 : rad\n    return (\n      <svg x={props.pos.x} y={props.pos.y} className=\" hq_location\"  onClick={props.triggerTrainingMode}>\n        <circle className=\"node\" cx=\"0\" cy=\"0\" r={`${rad}em`}  />\n        <LocationLabel city={props.loc.city} country={props.loc.country} state={props.loc.state}/>\n\n      </svg>\n    )\n} \n\n\n\n\n\n\n\nconst Date_aquired = ( props ) => {\n  \n  return (\n    <svg x={props.pos.x} y={props.pos.y} className=\" date_aquired\" onClick={props.triggerTrainingMode}>\n      <circle className=\"node\" cx=\"0\" cy=\"0\" r={`${props.radius}em`}  />\n      <text className=\"title\" x=\"0\" y=\"0.25em\" textAnchor=\"middle\"  >{props.year.split('/')[2]}</text>\n    </svg>\n  )\n}\n\n\n\n\n\n\nconst Date_exited = ( props ) => {\n  \n  if(props.year){\n    \n    return (\n      <svg x={props.pos.x} y={props.pos.y} className=\" date_exited\"  onClick={props.triggerTrainingMode}>\n      <circle className=\"node \" cx=\"0\" cy=\"0\" r={`${props.radius}em`}  />\n      <text className=\"title\" x=\"0\" y=\"0.25em\" textAnchor=\"middle\" >{props.year.split('/')[2]}</text>\n      </svg>\n    )\n  }\n  else{\n    return null\n  }\n}\n\n\n\n\n\n\nconst Logo = ( props ) => {\n  \n  const imgRef = useRef()\n  const [offsetX, setOffsetX] = useState(0)\n  // const [imgWidth, setImgWidth] = useState(0)\n  useEffect(()=>{\n    setOffsetX(imgRef.current.getBoundingClientRect().width/2)\n    // setImgWidth()\n  },[])\n  \n  return (\n    <svg x={props.pos.x} y={props.pos.y} className=\" logo\"  onClick={props.triggerTrainingMode}>\n      <mask id=\"myMask\">\n        <rect x={`${-props.radius*2}em`} y={`${-props.radius*1.08}em`} width={`${props.radius*4}em`} height={`${props.radius*1.1}em`} fill=\"white\" />\n      </mask>\n      <circle className=\"node \" cx=\"0\" cy=\"1\" r={`${props.radius}em`} mask=\"url(#myMask)\"  />\n      <image x={-offsetX} y=\"0.6em\" href={props.src} height={`${props.radius}em`} width={`${props.radius*3}em`}ref={imgRef} />\n    </svg>\n  )\n}\n\n\n\n\n\n\n\n\n\n\nconst Years_of_investment = ( props ) => {\n  \n  // need to be updated to be more precise\n  const exit = props.end?new Date(props.end.split('/')[2],props.end.split('/')[0]-1, props.end.split('/')[1] ):new Date()\n  const aquired = new Date(props.begining.split('/')[2],props.begining.split('/')[0]-1, props.begining.split('/')[1] )\n\n  var diff = Math.floor(exit.getTime() - aquired.getTime());\n  var day = 1000 * 60 * 60 * 24;\n\n  var days = Math.floor(diff/day);\n  var months = Math.floor(days/31);\n  // var years = Math.floor(months/12);\n  var years = Math.floor(days/365);\n  let timeLable = ''\n  let timeNumber = ''\n  if( years > 0){\n    timeLable = \"Years\"\n    timeNumber = years\n  }\n  else if (years ===0) {\n    timeLable = \"Months\"\n    timeNumber = months\n  }\n\n  if ( DEBUG )  console.log(\"Years_of_investment\",timeLable, years, months, diff, \n  \"\\n\", aquired,  \"\\n\",exit, \"\\n\",props, \n  \"\\n\",props.begining.split('/')[2], props.begining.split('/')[1]-1, props.begining.split('/')[0] )\n  return (\n    <svg x={props.pos.x} y={props.pos.y} className=\" years_of_investment\"  onClick={props.triggerTrainingMode}>\n      <circle className=\"node\" cx=\"0\" cy=\"0\" r={`${props.radius}em`}  />\n      <text className=\"title large\" x=\"0\" y=\"0\" dy=\"0em\" textAnchor=\"middle\" >{timeNumber}+</text>\n      <text className=\"sub-title\" x=\"0\" y=\"0\" dy=\"0em\" textAnchor=\"middle\" >\n        <tspan x=\"0\" y=\"0\" dy=\"1.8em\">{timeLable} of</tspan>\n        <tspan x=\"0\" y=\"0\" dy=\"2.8em\">investment</tspan>\n      </text>\n\n    </svg>\n  )\n}\n\n\n\nexport{\n  Hq_location,\n  Date_aquired,\n  Date_exited,\n  Logo,\n  Years_of_investment,\n};\n","/**\n* GTM - Google Tag Manager\n*\n* for Vista AGM Interactive Globe\n*\n* Google Tag Manager - Custom event handlers for variables passed to analytics\n* Import this into any module needed to track events; then call the main\n* delegate function : fireCustomGoogleTagEvent(eventId {number});\n*\n*/\n\nlet lastCompany = ''\nexport function fireCustomGoogleTagEvent(eventId, data) {\n  \n  let eventName = \"\";\n\n  // TODO: change event names to reflect what is being tracked\n\n  switch (eventId) {\n    case 0:\n      eventName = \"event 0\";\n      let justNames = []\n      for (let i = 0; i < data.length; i++) {\n        justNames[i] = data[i].name\n      }\n      window.dataLayer.push( { \"Location Selection\" : justNames} );\n      break;\n    case 1:\n        lastCompany = data\n      window.dataLayer.push( { \"Company page selection\" : data} );\n      break;\n      case 2:\n        data =`${lastCompany}>${data}`\n        window.dataLayer.push( { \"Add on companies\" : data} );\n      break;\n    case 3:\n        data =`${lastCompany}>${data}`\n      window.dataLayer.push( { \"Other locations\" : data} );\n      break;\n    default:\n      break;\n  }\n\n  console.log(\"------------------------------------------------------------\");\n  console.log('event : ', eventId, data);\n\n  \n}\nexport const gtmevents = {\n  'Location Selection':0,\n  'Company page selection':1,\n  'Add on companies': 2,\n  'Other locations':3,\n}\n// export  {\n//   fireCustomGoogleTagEvent,\n//   gtmevents\n// }","import React, { useRef, useEffect, useState} from 'react'\nimport { fireCustomGoogleTagEvent } from '../../gtm.js';\n// review how to optimize\n// https://reactjs.org/docs/hooks-faq.html#how-to-create-expensive-objects-lazily\nconst DEBUG = !true\n\nconst lineHeight = 1.5\n\nconst Cities = ( props ) => {\n  return(\n    <g className={`location-item-${props.index+1}`} key={props.index} style={{transform:`translate(0px, ${1.8+(lineHeight*props.index)}em)`}}>\n      <use href=\"#myDot\" x={`0`}  y=\"-0.4em\" width={`0.2em`} height={`0.2em`}/>\n      <text className=\"item\" x={`0.5em`} y={0}  textAnchor=\"left\" >\n        <tspan >{props.location.city}</tspan>{props.location.state?',':''} <tspan >{props.location.state}</tspan>\n      </text>\n    </g>\n  )\n}\n\nconst Countries = ( props ) => {\n  let padY = 0\n  for (let ind = 0; ind <= props.index; ind++) {\n    padY += props.region[ind-1]? lineHeight*props.region[ind-1].length : 1.5\n    padY += 2 \n  }\n\n  return (\n    <g className={`location-country-${props.index+1}`} key={props.index} style={{transform:`translate(0px, ${padY}em)`}}>\n      <line className=\"line-country\" x1=\"0\" y1=\"0.2em\" x2=\"100%\" y2=\"0.2em\" />\n      <text className=\"item\" textAnchor=\"left\" x={0} y={`0em`}>\n        <tspan >{props.country[0].country}:</tspan>\n      </text>\n      {props.children}\n    </g>\n  )\n}\n\n\nconst ScrollBtn = ( {fontSize, width, dir, display, y,...props} ) => {\n  const ChevSize = fontSize*0.5\n  const pathUP = `M 0 ${ChevSize*.5} L ${ChevSize/4} 0 L ${ChevSize/2} ${ChevSize*.5}`\n  const pathDown = `M 0 0 L ${ChevSize/4} ${ChevSize*.5} L ${ChevSize/2} 0`\n  \n  const onClick = ( e ) =>{\n    props.onClick()\n    if (DEBUG) console.log(`ScrollBtn`)\n  }\n  return(\n  <g className=\"scroll-btn\" style={{transform: `translate(0,${y-(fontSize)}px)`, display:display?'block':'none'}} >\n    <rect className=\"scroll-btn-bg\" x=\"0\" y=\"0\" width={width} height={fontSize*1.2} fill='url(#Gradient2)'onClick={onClick}/>\n    <path d={dir?pathUP:pathDown} style={{transform : ` translate(${0}px,${ChevSize/2}px) `}}/>\n    <path d={dir?pathUP:pathDown} style={{transform : ` translate(${0}px,${ChevSize/2+(fontSize*.5)*.6}px)`}}/>\n  </g>\n  )\n}\n\nconst Regions = ( props ) => {\n  \n  const lineHeight = 1.7\n  const firstLineOffset = 1.55\n  const gutter = props.gutter\n  \n  const regionRef = useRef( )\n  \n  \n  const [param, setParam] = useState(( )=> ({\n    scrollable: false,\n    fontSize: 24,\n    height: props.maxHeight\n  }))\n  const [scroll, setScroll] = useState(( )=>({\n    top:0,\n    dir:0\n  }))\n  \n  const [scrollStart , setScrollStart ] = useState(( )=>0)\n  const [lastScrollPos, setLastScrollPos] = useState(( )=>0)\n  \n  \n  const onTouchStart = (e)=>{\n    if( DEBUG ) console.log(`\\n\\n\\n\\tRegions.onTouchStart` )\n    setScrollStart(e.touches[0].clientY)\n    setLastScrollPos(scroll.top)\n  }\n  const onTouchMove = ( e ) =>{\n    if( DEBUG ) console.log(`\\tRegions.onTouchMove` )\n    keepInBounds(e.touches[0].clientY-scrollStart)\n  }\n  const onWheel = ( e ) =>{\n    e.preventDefault( )\n    e.stopPropagation( )\n  \n    if( DEBUG ) console.log(`\\tRegions.onWheel`, e.deltaY )\n    keepInBounds(e.deltaY>0? -4:4 )\n    setLastScrollPos(scroll.top)\n    return false\n  }\n  const onScrollBtn = ( e ) =>{\n    //set the direction, and increment the height or a large number enough to always get back to the top \n    let delta = (param.fontSize*props.btnSize*lineHeight*firstLineOffset)\n    delta = scroll.dir? 10000:-delta\n    if( DEBUG ) console.log(`\\tRegions.onScrollBtn`, delta )\n    //just move a percentage of the height at the time\n    setLastScrollPos(scroll.top)\n    keepInBounds( delta )\n  }\n  const keepInBounds = ( delta ) =>{\n    const{ height } = regionRef.current.children['column'].getBBox( )\n    const countryBlockOffset = (param.fontSize*props.btnSize*lineHeight*firstLineOffset)\n    const parentHeight = props.maxHeight-countryBlockOffset\n    if( DEBUG ) console.log(`\\tRegions.keepInBounds`, lastScrollPos, delta , lastScrollPos+delta, \"\\t\",height-parentHeight, height, parentHeight  )\n    if( lastScrollPos+delta <= 0 ){\n      if(Math.abs(lastScrollPos+delta) < height - parentHeight  ){\n        setScroll({\n          dir:  Math.abs(lastScrollPos+delta)> (height - parentHeight )*.9 ? 1:0,\n          top: lastScrollPos+delta,\n        })\n      }\n      else{\n        if ( DEBUG ) console.log(\"max\")\n        setScroll({\n          dir: 1,\n          top: -1*(height-parentHeight),\n        })\n      }\n    }\n    else{\n      if ( DEBUG ) console.log(\"min\")\n      setScroll({\n        dir: 0,\n        top: 0,\n      })\n    }\n  }\n \n \n  // console.log(\"Region\", actualPadding )\n\n  \n  useEffect((  ) => {\n    //mounting \n    const {  height } = regionRef.current.children['column'].getBBox( )\n    setParam({\n      scrollable: height> props.maxHeight?true:false,\n    fontSize: parseInt(getComputedStyle(regionRef.current).fontSize),\n    height:height\n    })\n    if ( DEBUG ) console.log(\"\\tRegion.useEffect\"  )\n    return ( ) => {\n      //unmounting\n    }\n  },[ props.maxHeight ])\n  \n  return(\n  <svg className={`location-region-${props.index+1}`} height={props.maxHeight} width={props.colW*gutter} \n       onTouchMove={param.scrollable?onTouchMove:null} onTouchStart={param.scrollable?onTouchStart:null} onWheel={param.scrollable?onWheel:null} \n       y={`7em`} ref={regionRef} x={ (props.colW*props.index) }>\n    \n    <g id=\"column\" className=\"scrollable-column\" style={{transform: `translate(0, ${scroll.top}px)`}} >\n      <rect className=\"scroll-bg\" width=\"100%\" height={param.height} x=\"0\" y={`${lineHeight*firstLineOffset}em`}/>\n      {props.children}\n    </g>\n\n    <rect className=\"scroll-bg\" width={props.colW*gutter} height={`${lineHeight}em`} x=\"0\" y=\"0\" />\n    <text className=\"title\" textAnchor=\"left\" x={0} y={`1em`}>\n      <tspan > {props.region[0][0].region}</tspan>\n    </text>\n    <line className=\"line-region\" x1=\"0\" y1={`${lineHeight}em`} x2=\"100%\" y2={`${lineHeight}em`} />\n    <ScrollBtn fontSize={param.fontSize*props.btnSize} width={props.colW*gutter} dir={scroll.dir} \n          onClick={onScrollBtn} display={param.scrollable} y={props.maxHeight}/>\n    \n  </svg>\n  )\n}\n\n\nconst OtherLocations = ( props ) => {\n  const thisNodeRef = useRef( )\n    \n  let regions = []\n  const colMinWidht = 100\n  const colMaxWidht = 220\n  const maxWidthGroup = 1100\n  let windowPadding = window.innerWidth*.1\n  const btnSize=2\n  const gutter = 0.9\n  \n  const [scrollX , setScrollX ] = useState(( )=>0)\n  const [scrollStart , setScrollStart ] = useState(( )=>0)\n  let [lastScrollPos, setLastScrollPos] = useState(( )=>0)\n  const [param, setParam] = useState(( )=>({\n    colWidth: 0,\n    maxHeight: 200,\n    offsetX: 0,\n    groupPadding: 0,\n    fontSize: 20,\n    actualPadding: 20,\n  }) )\n  \n  const toggleState = ( event ) => {\n    \n    if ( event.target.parentElement.classList.contains('rc') ){\n      // toogle class and reorganize svg staking order\n      let thisElement = event.currentTarget.parentElement\n      let parentElemtn = event.currentTarget.parentElement.parentElement\n      parentElemtn.insertBefore(thisElement,thisElement.children[thisElement.children.length-1].nextSibling)\n      thisElement.children['other_locations'].children['shadow'].classList.toggle('shadow')\n      // thisElement.children['other_locations'].children['clickable'].classList.toggle('clickable')\n      thisElement.children['other_locations'].classList.toggle('active')\n      props.toggleDetail(\"OtherLocations\")\n      getparams( )\n      if(thisElement.children['other_locations'].classList.contains('active')) fireCustomGoogleTagEvent(3, 'Other locations');\n      setTimeout( ( ) => {\n        // wait 10ms so for the reorganizing the staking order takes effect and turn on \n        thisElement.children['other_locations'].children['location-list'].classList.toggle('detail-show')\n        thisElement.children['other_locations'].children['location-list'].classList.toggle('detail-out')\n      },10)\n    }\n  }\n  const getparams = ( ) => {\n    if(thisNodeRef.current === undefined) return\n    const {x,y, width} = thisNodeRef.current.children['clickable'].getBoundingClientRect( )\n    const fontSize = parseInt(getComputedStyle(thisNodeRef.current).fontSize)  \n    const workingWidth = window.innerWidth-windowPadding>maxWidthGroup?maxWidthGroup:window.innerWidth-windowPadding\n    const _colW = workingWidth/regions.length>colMaxWidht?colMaxWidht:workingWidth/regions.length\n    const colWidth = _colW<colMinWidht? colMinWidht: _colW\n    // const maxHeight = 400+(fontSize*btnSize)\n    const maxHeight = (window.innerHeight-(y+props.radius))*.7\n    const offsetX = x + (width/2) \n    let actualPadding = (window.innerWidth-((param.colWidth*regions.length)-(param.colWidth*(1-gutter))))/2\n      actualPadding = actualPadding < 20 ? 20 : actualPadding\n    // setOffsetX( x + windowPadding/2)\n    \n    setParam({\n      colWidth,\n      maxHeight,\n      offsetX,\n      fontSize,\n      actualPadding,\n    })\n    if ( DEBUG ) console.log(\"getparams\\n\", \"offsetX\",offsetX , \"window Width:\",window.innerWidth, \"workingWidth:\",workingWidth, \"padding\", \n      windowPadding,\"colwidth\", colWidth , \"maxHeight\",maxHeight, \"\\n\",\n      thisNodeRef.current.children['clickable'].getBoundingClientRect( ))//\n  }\n\n  useEffect(( )=>{\n    getparams( )    \n  },[])\n\n  \n  const onMouseDown = (e)=>{\n    e.preventDefault()\n    e.stopPropagation()\n    if( DEBUG ) console.log(`OtherLocations.onMouseDown`, e )\n    setScrollStart(e.clientX)\n    setLastScrollPos(scrollX)\n  }\n  const onMouseMove = (e)=>{\n    e.preventDefault()\n    e.stopPropagation()\n    if(e.buttons ){\n      keepInBounds(e.clientX-scrollStart)\n    }\n  }\n  const onTouchStart = (e)=>{\n    e.preventDefault()\n    e.stopPropagation()\n    if( DEBUG ) console.log(`OtherLocations.onTouchStart`, e.touches[0].clientX )\n    setScrollStart(e.touches[0].clientX)\n    setLastScrollPos(scrollX)\n  }\n  const onTouchMove = (e)=>{\n    e.preventDefault()\n    e.stopPropagation()\n    // if( DEBUG ) console.log(`OtherLocations.onTouchMove`, scrollStart, e.touches[0].clientX-scrollStart )\n    keepInBounds(e.touches[0].clientX-scrollStart)\n  }\n  const keepInBounds = ( delta ) =>{\n    const {width} = thisNodeRef.current.children['location-list'].children['lateral-scroll-window'].getBoundingClientRect()\n    // const scrollGroup = scrollWindow.children['lateral-scroll-grop']\n    const scrollWindowWidth = window.innerWidth-(param.actualPadding*2)\n    // if( DEBUG ) console.log(`OtherLocations.keepInBounds`, lastScrollPos, delta, Math.abs(lastScrollPos+delta),\"\\t\",width, scrollWindowWidth )\n    if( lastScrollPos+delta < 4 ){\n      if(Math.abs(lastScrollPos+delta) < width - scrollWindowWidth  ){\n        setScrollX( lastScrollPos+delta  )\n      }\n    }\n\n  }\n\n  if(props.list.length){\n    regions = sortRegions( props.list )\n    return (\n      <svg x={props.pos.x} y={props.pos.y} id=\"other_locations\" className=\"other_locations rc\" onClick={toggleState.bind(this)} ref={thisNodeRef}>\n        <symbol id=\"myDot\" viewBox=\"0 0 2 2\">\n          <circle cx=\"1\" cy=\"1\" r=\"1\" />\n        </symbol>\n        <defs><linearGradient id=\"Gradient2\" x1=\"0\" x2=\"0\" y1=\"0\" y2=\"1\">\n                <stop offset=\"0%\" stopColor=\"red\"/>\n                <stop offset=\"10%\" stopColor=\"black\" stopOpacity=\"0\"/>\n            </linearGradient></defs>\n        <g id=\"location-list\" className=\"location-list detail-out\" style={{transform:`translate(${-param.offsetX}px, 0)`}}>\n          <rect className=\"bg\" x={`-100%`} y={`-100%`} width=\"400%\" height=\"400%\"/>\n          {/* <rect className=\"debug rect\" x={((window.innerWidth-((param.colWidth*regions.length)-(param.colWidth*(1-.9))))/2)} y={`0`} width={(param.colWidth*regions.length)-param.colWidth*.1} height=\"100%\" fill=\"red\"/> */}\n          <svg x={param.actualPadding} y='0' id='lateral-scroll-window' className=\"lateral-scroll-window\" width={window.innerWidth-(param.actualPadding*2)} height=\"100%\" style={{overflow: 'scroll'}} \n            onMouseDown={onMouseDown} onMouseMove={onMouseMove} \n            onTouchStart={onTouchStart} onTouchMove={onTouchMove}\n            >\n            <rect className=\"bg\" x='0' y='0' width=\"100%\" height=\"100%\"  />\n            <g id='lateral-scroll-grop' style={{transform: `translate(${scrollX}px, 0)`}}> \n            {regions.map( ( region, ri ) =>(\n              <Regions key={ri} region={region} index={ri} maxHeight={param.maxHeight} btnSize={btnSize}\n                colW={param.colWidth}   total={regions.length} actualPadding={param.actualPadding} gutter={gutter} >\n                {region.map( ( country, ci ) =>(\n                  <Countries country={country} region={region} index={ci} key={ci}>\n                    {country.map( ( location, li ) =>(\n                    <Cities location={location} key={li} index={li} />\n                    ))}\n                  </Countries>\n                ))}\n              </Regions>\n            ))}\n            </g>\n          </svg>\n          </g>\n        <circle id=\"shadow\" className={`node shadow rc`} cx=\"0\" cy=\"0\" r={`${props.radius}em`}  />\n        <circle id=\"clickable\" className={`node clickable rc`} cx=\"0\" cy=\"0\" r={`${props.radius}em`}  />\n        <text className=\"title large rc\" x=\"0\" dy=\"0\" textAnchor=\"middle\" >{props.list.length}</text>\n        <text className=\"sub-title rc\" x=\"0\" y=\"0\" textAnchor=\"middle\" >\n          <tspan x=\"0\" y=\"0\" dy=\"1.8em\">Other</tspan>\n          <tspan x=\"0\" y=\"0\" dy=\"2.8em\">Locations</tspan>\n        </text>\n      </svg>\n    )\n  }\n  else{\n    return null\n  }\n}\n\nconst sortRegions = ( list ) =>{\n  let regionNames = []\n    // collect region names\n    list.forEach( el => {\n      if(!regionNames.find( e =>el.region === e)) regionNames.push(el.region)\n    })\n    // create colums of elements by those regions\n    let regionsPresort = regionNames.map( (region, i) => list.filter( l => l.region === region ) )\n    // organize data into 3 level array\n    return regionsPresort.map( (colum, i) =>{  \n      // collect country names in colum\n      const o = [] \n      colum.forEach(row => {\n        if(!o.find( e =>row.country === e)) o.push(row.country)\n      })\n      let g = []\n      // create groups based on those contries\n      o.forEach( group =>{\n        g.push(colum.filter( l => l.country === group ))\n      })\n      return g\n    })\n}\n\nexport default OtherLocations","import React, { useState} from 'react'\nimport { fireCustomGoogleTagEvent } from '../../gtm.js';\nconst DEBUG = false\n\nconst AddOnCompanies = ( props ) => {\n  let [fontSize, setFontSize] = useState(()=>20)\n  let [offset, setOffset] = useState(()=>({x: 1, y: 0}))\n  \n  \n  const toggleState = ( event )=>{\n    let thisElement = event.currentTarget.parentElement\n    let parentElemtn = event.currentTarget.parentElement.parentElement\n    if ( DEBUG )  console.info( \"AddOnCompanies\", thisElement, parentElemtn)\n    let thisNode=parentElemtn.insertBefore(thisElement,thisElement.children[thisElement.children.length-1].nextSibling)\n    thisElement.children['addOnCompanies'].children['shadow'].classList.toggle('shadow')\n    const list = thisElement.children['addOnCompanies'].children['companies-list']\n    const {height, width, x, y} =list.children[list.children.length-1].getBoundingClientRect()\n    if ( DEBUG )   console.log(`AddOnCompanies`,list.children[list.children.length-1].getBoundingClientRect())\n\n    thisElement.children['addOnCompanies'].classList.toggle('active')\n    // thisElement.children['clickable'].classList.toggle('clickable')\n    if(thisElement.children['addOnCompanies'].classList.contains('active')){\n      fireCustomGoogleTagEvent(2, 'AddonComapnies');\n    }\n    if(props.list.find(company => company.name.length > 40 )){\n      props.toggleDetail(\"AddOnCompanies\")\n    }\n    setFontSize(parseInt(getComputedStyle(thisNode).fontSize))\n\n    setOffset({\n        x:window.innerWidth < 450 ? 0 :1, \n        y:window.innerHeight < 680 ? 0 :1, })\n\n        if ( DEBUG )  console.log(`AddOnCompanies`,\"offset\", offset, window.innerHeight - (y + height), 'height',height, \"window.innerHeight\",window.innerHeight )\n    setTimeout(()=>{\n      const animIn = thisNode.children['addOnCompanies'].children['companies-list'].classList.toggle(\"detail-show\")\n      thisNode.children['addOnCompanies'].children['companies-list'].classList.toggle(\"detail-out\")\n\n      \n      if ( DEBUG )  console.info( \"AddOnCompanies\", animIn)\n    },10)\n    \n  }\n  const transition = (  )=>{\n    const delayInterval = 80\n    let t = `\n    #company .companies-list.detail-out, #company .companies-list.detail-out rect{\n      transition-delay: 0ms;\n      transition-delay: ${300+(props.list.length*delayInterval)}ms;\n    }\n    `\n    for (var i = 1; i <= props.list.length; i++) {\n      t += `\n        .company-item-${i} text, .company-item-${i} line{\n          transition-delay: ${((props.list.length-1)*delayInterval) - ((i-1)*delayInterval)}ms !important;\n        }\n        .company-item-${i} circle{\n          transition-delay: ${300+((props.list.length-1)*delayInterval)- ((i-1)*delayInterval)}ms !important;\n        }\n        .detail-show .company-item-${i} text, .detail-show .company-item-${i} line{\n          transition-delay: ${(300+delayInterval) +((i-1)*delayInterval)}ms !important;\n        }\n        .detail-show .company-item-${i} circle{\n          transition-delay: ${i*delayInterval}ms !important;\n        }\n      `\n    }\n    return t\n  }\n  \n \n  if(props.list.length){\n    return (\n      <svg x={props.pos.x} y={props.pos.y} id=\"addOnCompanies\" className=\"addOnCompanies\" onClick={toggleState.bind(this)} >\n          \n      <style>\n        {transition()}\n      </style>\n      \n        <g id=\"companies-list\" className=\"companies-list detail-out\"  >\n          <rect className=\"bg\" x={`-100%`} y={`-100%`} width=\"300%\" height=\"300%\" />\n          {props.list.map( ( company, i ) =>{\n              const radiusOffset = ( props.radius*fontSize )\n            return (\n              <g className={`circle-item company-item-${i+1}`} key={i} >\n                <circle className=\"node-empty\" cx=\"0\" cy=\"0\" r={radiusOffset+((i+1)*fontSize)}  />\n              </g>\n            )\n          })}\n          {props.list.map( ( company, i ) =>{\n              const radiusOffset = ( props.radius*fontSize )\n              const titleOffsetY = offset.x ?  radiusOffset + ( fontSize*props.list.length ) : radiusOffset + ( fontSize*(props.list.length*0.2) )\n              const titleOffsetX = radiusOffset - ( fontSize*props.list.length/2 )\n              const titleY = titleOffsetY + ( i*(fontSize*2) ) \n              const titleX =  offset.x ?  titleOffsetX+( fontSize*props.list.length ) : fontSize*2\n            return (\n              <g className={`company-item-${i+1}`} key={i} >\n                <line x1=\"0\" y1={(fontSize/2)+radiusOffset+(i*fontSize)}  x2={titleX  - (fontSize/2) } y2={titleY - (fontSize/2)}/>\n                <rect className=\"bg\" x={titleX} y={titleY-fontSize} width={`${(company.name.length+company.acquisition_date.length)*0.5}em`} height=\"1.5em\" />\n                <text className=\"title\" x={titleX} y={titleY}  textAnchor=\"left\" >\n                  <tspan >{company.name}</tspan>\n                  <tspan className=\"date\"> {company.acquisition_date}</tspan>\n                </text>\n                {/* <circle className=\"node-empty\" cx=\"0\" cy=\"0\" r={radiusOffset+((i+1)*fontSize)}  /> */}\n              </g>\n            )\n          })}\n\n        </g>\n        <circle id=\"shadow\" className={`node shadow`} cx=\"0\" cy=\"0\" r={`${props.radius}em`}  style={{transform: `translate(0,${0}px)`}}/>\n        <circle id=\"clickable\" className={`node clickable`} cx=\"0\" cy=\"0\" r={`${props.radius}em`}  style={{transform: `translate(0,${0}px)`}}/>\n        <text className=\"title large\" x=\"0\" dy=\"0\" textAnchor=\"middle\" style={{transform: `translate(0,${0}px)`}}>{props.list.length}</text>\n        <text className=\"sub-title\" x=\"0\" y=\"0\" textAnchor=\"middle\" style={{transform: `translate(0,${0}px)`}}>\n          <tspan x=\"0\" y=\"0\" dy=\"1.8em\">Add on</tspan>\n          <tspan x=\"0\" y=\"0\" dy=\"2.8em\">Companies</tspan>\n        </text>\n        \n      </svg>\n    )\n  }\n  else{\n    return null\n  }\n}\n\nexport default AddOnCompanies","import React, {  useRef, useEffect } from 'react'\nimport { useTrail, animated , useChain} from \"react-spring/\";\nimport {\n  Hq_location as HqLocation, Date_aquired as DateAquired,\n  Date_exited as DateExited, Logo,  Years_of_investment as YearsOfInvestment\n} from './Nodes'\nimport  OtherLocations from './OtherLocations'\nimport  AddOnCompanies from './AddOnCompanies'\nimport VistaColors from '../Colors'\n\nimport { fireCustomGoogleTagEvent } from '../../gtm.js';\n\n// REFERENCE DESIGN FOR THIS\nlet NODE = {\n  logo: {\n    dia: 2,\n    x: .50, y: .90,\n  },\n  hq_location: {\n    dia: 4.3,\n    x: .85, y: .60,\n  },\n  date_exited: {\n    dia: 1.95,\n    x: .32, y: .40,\n  },\n  add_on_companies: {\n    dia: 4,\n    x: .40, y: .15,\n  },\n  other_locations: {\n    dia: 4,\n    x: .84, y: .22,\n  },\n  years_of_investment: {\n    dia: 4,\n    x: .1504, y: .5868,\n  },\n  // date_aquired:{\n  //   x: .28, y: .75,\n  // }\n\n}\nconst a = (NODE.logo.x-NODE.years_of_investment.x)/2\nconst b = (NODE.logo.y-NODE.years_of_investment.y)/2\n// const hyp = Math.sqrt(Math.pow(a, 2)+Math.pow(b,2))\nNODE.date_aquired = {\n//   // x: .2472, y: .6797,\n  dia: 1.95,\n  x: a+NODE.years_of_investment.x, y: b+NODE.years_of_investment.y,\n}\n\n\nconst getSmallRandom = () => {\n  return Math.random()*.1 \n}\n\nconst Card = ( props ) => {\n  \n  let config = window.BrowserDetect.mobile? { duration: 200 }:   { mass: 2, tension: 2500, friction: 120 }\n   \n  const nodePlacement = {\n    logo: {                x: `${100*(NODE.logo.x)}%`,                y: `${100*(NODE.logo.y)}%`},\n    hq_location: {         x: `${100*(NODE.hq_location.x)}%`,         y: `${100*(NODE.hq_location.y)}%`},\n    date_aquired: {        x: `${100*(NODE.date_aquired.x)}%`,        y: `${100*(NODE.date_aquired.y)}%`},\n    date_exited: {         x: `${100*(NODE.date_exited.x)}%`,         y: `${100*(NODE.date_exited.y)}%`},\n    add_on_companies: {    x: `${100*(NODE.add_on_companies.x)}%`,    y: `${100*(NODE.add_on_companies.y)}%`},\n    other_locations: {     x: `${100*(NODE.other_locations.x)}%`,     y: `${100*(NODE.other_locations.y)}%`},\n    years_of_investment: { x: `${100*(NODE.years_of_investment.x)}%`, y: `${100*(NODE.years_of_investment.y)}%`},\n  }\n\n  let nodeBubbles = ([\n    <Logo key=\"Logo\" src={props.company.logo} pos={nodePlacement.logo} radius={NODE.logo.dia} triggerTrainingMode={props.triggerTrainingMode}/>,\n    <HqLocation key=\"Hq_location\" loc={props.company.hq_location} pos={nodePlacement.hq_location} radius={NODE.hq_location.dia} triggerTrainingMode={props.triggerTrainingMode}/>,\n    <DateAquired key=\"Date_aquired\" year={props.company.date_aquired} pos={nodePlacement.date_aquired} radius={NODE.date_aquired.dia} triggerTrainingMode={props.triggerTrainingMode}/>,\n    <YearsOfInvestment key=\"Years_of_investment\" begining={props.company.date_aquired} end={props.company.date_exited} pos={nodePlacement.years_of_investment} radius={NODE.years_of_investment.dia} triggerTrainingMode={props.triggerTrainingMode}/>,\n    <DateExited key=\"Date_exited\" year={props.company.date_exited} pos={nodePlacement.date_exited} radius={NODE.date_exited.dia} triggerTrainingMode={props.triggerTrainingMode}/>,\n    <OtherLocations key=\"Other_locations\" list ={props.company.other_locations} pos={nodePlacement.other_locations} radius={NODE.other_locations.dia} toggleDetail={props.toggleDetail}/>,\n    <AddOnCompanies key=\"Add_on_companies\" list={props.company.add_on_companies} pos={nodePlacement.add_on_companies} radius={NODE.add_on_companies.dia} toggleDetail={props.toggleDetail}/>,\n  ]); \n\n  let nodeLines = [\n    {className:1,active: true,base:'hq_location',   x1: nodePlacement.logo.x, y1: nodePlacement.logo.y,  x2: nodePlacement.hq_location.x, y2: nodePlacement.hq_location.y },\n    {className:1,active: true,base:'years_of_investment',   x1: nodePlacement.logo.x, y1: nodePlacement.logo.y,  x2: nodePlacement.years_of_investment.x, y2: nodePlacement.years_of_investment.y },\n    {className:props.company.add_on_companies.length,active: props.company.add_on_companies.length>0,base:'add_on_companies', x1:nodePlacement.logo.x, y1: nodePlacement.logo.y, x2: nodePlacement.add_on_companies.x, y2:nodePlacement.add_on_companies.y},\n    {className:props.company.other_locations.length,active: props.company.other_locations.length>0,base:'other_locations', x1:nodePlacement.hq_location.x, y1: nodePlacement.hq_location.y, x2: nodePlacement.other_locations.x, y2:nodePlacement.other_locations.y},\n    {className:1,active: props.company.date_exited,base:'date_exited', x1:nodePlacement.years_of_investment.x, y1: nodePlacement.years_of_investment.y, x2: nodePlacement.date_exited.x, y2:nodePlacement.date_exited.y},\n  ]\n\n  let from = {  }\n  let enter = { transform: \"translate3d(0, 0, 0)\" }\n  if (props.onInitialCard) {\n    from.transform = \"translate3d(0, -1%, 0)\"\n  }\n  else if (props.movingDirection === 'LEFT') {\n    from.transform = \"translate3d(-3%, 0 ,0)\"\n  }\n  else if (props.movingDirection === 'RIGHT') {\n    from.transform = \"translate3d(3%, 0 ,0)\"\n  }\n  \n\n  const bubblesRef = useRef()\n\n  const nodeBubblesTrail = useTrail(nodeBubbles.length, {\n    config: config,\n    from: from,\n    to: enter,\n    ref: bubblesRef\n  })\n\n  const linesRef = useRef();\n  const nodeLinesTrail = useTrail(nodeLines.length, {\n    config: config,\n    from: from,\n    to: enter,\n    ref: linesRef\n  })\n  useChain([bubblesRef, linesRef], [0,0]);\n\n  // console.log(\"\\tCard\", props.company.other_locations, props.company.add_on_companies,props.company.date_exited )\n  useEffect(()=>{\n    fireCustomGoogleTagEvent(1, props.company.name);\n  }, [])\n  return (\n    <div className=\"content-wrapper\">\n      <div className=\"group-vert\">\n        <span className=\"group\"> {props.company.group} </span>\n        <span className=\"vert\" style={{ color: VistaColors.verticals[props.company.industry_vertical] }}> {props.company.industry_vertical} </span>\n      </div>\n\n      <div className=\"name-copy\">\n        <h1 className=\"name\" style={{ color: VistaColors.verticals[props.company.industry_vertical] }} dangerouslySetInnerHTML={{__html:props.company.name}}></h1>\n        <p className=\"copy\">\n          {props.company.value_proposition}\n        </p>\n      </div>\n      <svg id=\"nodes\" className=\"nodes\" >\n        <g className=\"center\">\n        {nodeLinesTrail.map((style, index) => {\n            if ( nodeLines[index].active ){\n              return (\n              <animated.line className={`nodeLines ${nodeLines[index].className>4?'':'dotted'}`} id={`line-to-${nodeLines[index].base}`}\n                    x1={nodeLines[index].x1} y1={nodeLines[index].y1}\n                    x2={nodeLines[index].x2} y2={nodeLines[index].y2}  key={index} style={style}/>\n          )}\n          else return null\n        })}\n        {nodeBubblesTrail.map((style, index) => (\n          <animated.g id={nodeBubbles[index].key} style={style} key={index} >\n              {nodeBubbles[index]}\n            </animated.g>\n        ))}\n        </g>\n      </svg>\n    </div>\n  )\n\n}\n\n\nexport default Card;\n","import React, { useState, useRef } from 'react'\nimport { useSpring, useTransition, animated} from 'react-spring'\nimport './main.scss'\nimport Card from './Card'\n\n\n\n\nconst DEBUG = !true\n\nconst Company = ({ companies, ...props }) =>{\n  \n  \n  const [shouldClose, setShouldClose] = useState(false)\n  const [onInitialCard, setOnInitialCard] = useState(true)\n  const [index, setIndex] = useState(props.selectedCompanyIndex)\n  const [movingDirection, setMovingDirection] = useState(null)\n  const [arrowShow, setArrowShow] = useState({prev: companies.length===1?\"hide\":\"show\", next: companies.length===1?\"hide\":\"show\"})\n  const [touch, seTouch] = useState({\n    clientX: null,\n    timeStamp: null,\n  })\n  const cardRef = useRef()\n  \n  let transformFrom = \"translate3d(100%, 0 ,0)\"\n  let transformEnter = \"translate3d(0%, 0, 0)\"\n  let transformLeave = \"translate3d(-100%, 0, 0)\"\n\n    \n  const [cardTransforms, setCardTransforms] = useState({\n    from: { opacity: 0 },\n    enter: { opacity: 1 },\n    leave: { opacity: 0 }\n  })\n  const [bgSpring, setBgSpring ] = useSpring(()=>({opacity:1}));\n  const [cards, setCards] = useState( [ companies[index] ])\n  \n  // let config = window.BrowserDetect.mobile? { duration: 2000 }: { mass: 1, tension: 210, friction: 30 }\n  let config = { duration: 300 }\n  // console.log(\"Card nex \", companies , cards, index )\n  const cardTransition = useTransition(cards, item => item.id , {\n    config: config ,\n    from: cardTransforms.from,\n    enter: cardTransforms.enter,\n    leave: cardTransforms.leave,    \n    reset: true,\n    unique: true,\n    onDestroyed: ( e ) => {\n      if ( DEBUG ) console.log(\"On onDestroyed! \", e )\n    },\n    onRest: ( e ) => {\n      if( shouldClose ) {\n        if ( DEBUG ) console.log( \"Company.UNMOUNTING \", e)\n        props.setSelectedCompany(null)\n      } \n    }\n  })\n\n  const nextCompany = ( e ) => {\n    \n    let shouldSlide = (companies.length > 1)\n    setMovingDirection( 'RIGHT' )\n    setCardTransforms({\n      from: { opacity: 1, transform: transformFrom},\n      enter: { opacity: 1, transform: transformEnter},\n      leave: { opacity: 1, transform: transformLeave}\n    })\n    setBgSpring({opacity:1})\n    setOnInitialCard( !shouldSlide)\n    // this looks weird but basically index is referencing the previous state\n    // that is why we setCards with index + 1\n    const indx = ( index+1 >= companies.length-1)? 0 : index + 1\n    setCards( [companies[indx+1]] )\n    setIndex( indx )\n    if ( DEBUG ) console.log(\" Company.nextCompany\",( index === companies.length-1), companies.length ,shouldClose, index, cards)\n\n  }\n\n  const previousCompany = ( ) => {\n\n    let shouldSlide = (companies.length > 1)\n    transformFrom = \"translate3d(-100%, 0 ,0)\"\n    transformLeave = \"translate3d(100%, 0, 0)\"\n    setMovingDirection( 'LEFT' )\n    setOnInitialCard( !shouldSlide)\n    setCardTransforms({\n      from:{ opacity: 1, transform: transformFrom},//0\n      enter: { opacity: 1, transform: transformEnter},\n      leave: { opacity: 1, transform: transformLeave}//0\n    })\n    setBgSpring({opacity:1})\n    // console.log(\" Company.previousCompany\",( index <= 0 ), companies.length , index, cards)\n    const indx = index-1 <= 0 ? companies.length - 1 : index - 1\n    setCards( [companies[indx-1]] )\n    setIndex( indx )\n    if ( DEBUG )  console.log(\" Company.previousCompany\",( index <= 0 ), companies.length , index, cards)\n  }\n  const toggleDetail = ( e )=>{\n    cardRef.current.classList.toggle('detail-active')\n    cardRef.current.classList.toggle(`${e}-active`)\n    if ( DEBUG ) console.log(\"toggleDetail\", e)\n  }\n  const closeCompany = ( )=> {\n    // setReset( true )\n    setShouldClose( true );\n    setCardTransforms({\n      from: { opacity: 1 },\n      enter: { opacity: 0 },\n      leave: { opacity: 0 }\n    })\n    setBgSpring({opacity:0})\n    // make force an update. make it seem like it's differen data \n    setCards( [{...companies[index], id:\"same\"}] )\n    // setCards( [{...companies[index]}] )\n  }\n\n  if (onInitialCard){\n    if ( DEBUG ) console.log(\"\\n\\n\\n\\n\\nCompany\", index,shouldClose, onInitialCard)\n  }\n  else{\n    if ( DEBUG ) console.log(\">>\\nCompany\", index,shouldClose, onInitialCard)\n  }\n  const onTouchStart = (e)=>{\n    seTouch({\n      clientX:  e.touches[0].clientX,\n      timeStamp: e.timeStamp,\n    })\n  }\n  const onTouchEnd = (e)=>{\n    //ensure it is not a super slow drag, or tiny tiny swipe\n    if(e.timeStamp-touch.timeStamp  < 800 && Math.abs(e.changedTouches[0].clientX-touch.clientX )> 50 ){\n      if( e.changedTouches[0].clientX > touch.clientX ){\n        // console.log(\"right\", e.timeStamp-touch.timeStamp , Math.abs(e.changedTouches[0].clientX-touch.clientX ))\n        previousCompany()\n      }else{\n        nextCompany()\n        // console.log(\"left\", e.timeStamp-touch.timeStamp , Math.abs(e.changedTouches[0].clientX-touch.clientX ) )\n      }\n    }\n  }\n  const triggerTrainingMode = ()=>{\n    cardRef.current.classList.toggle('training-mode')\n    setTimeout(()=>{\n      cardRef.current.classList.toggle('training-mode')\n    }, 2600)\n  }\n  \n  return (\n    <div className=\"company-wrapper\" >\n        <animated.div className=\"background\" style={bgSpring} />\n          {cardTransition.map( ({ item, props, key }, i)  =>\n            <animated.div id=\"company\" style={props} key={key} ref={cardRef} onTouchStart={onTouchStart} onTouchEnd={onTouchEnd}>\n              {/* {console.log(props)} */}\n              {shouldClose? null: <Card company={item} movingDirection={movingDirection} shouldClose={shouldClose} onInitialCard={onInitialCard} toggleDetail={toggleDetail} triggerTrainingMode={triggerTrainingMode} />}\n              <button className=\"close\" onClick={closeCompany}> <p>Back Home</p><img alt=\"back home button\" src={`${window.location.protocol}//${window.location.hostname}/data/assets/back_home@2x.png`}/> </button>\n              <button className={`arrow-previous ${arrowShow.prev}`} onClick={previousCompany}><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 17.89 41.52\"><defs><style>{`.cls-1{fill:none;stroke:#231f20;stroke-miterlimit:10;}`}</style></defs><title>prev</title><polyline className=\"cls-1\" points=\"17.5 0.32 0.65 20.76 17.5 41.2\"/></svg>  </button>\n              <button className={`arrow-next ${arrowShow.next}`} onClick={nextCompany}>  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 17.89 41.52\"><defs><style>{`.cls-1{fill:none;stroke:#231f20;stroke-miterlimit:10;}`}</style></defs><title>next</title><polyline className=\"cls-1\" points=\"0.39 0.32 17.24 20.76 0.39 41.2\"/></svg> </button>\n            </animated.div>\n          )}\n\n    </div>\n  )\n\n}\n\nexport default Company\n","import React, { useRef } from 'react'\n\nimport { useSpring, animated } from 'react-spring'\nimport VistaColors from '../Colors.js';\n\nimport './main.scss'\n\n//import fireCustomGoogleTag from '../gtm-tracking.js';\nimport { fireCustomGoogleTagEvent } from '../../gtm.js';\n\n// import '../../styles/mixins.scss'\n\nconst DEBUG = !true\n\nconst List = ( props ) => {\n  const selected = ( e ) => {\n    e.preventDefault( )\n    const currentTargetId = e.currentTarget.attributes['data-id'].nodeValue\n    if ( DEBUG ) console.log( `\\nList.selected` , currentTargetId )\n    props.setSelectedCompany(currentTargetId)\n\n    fireCustomGoogleTagEvent(0, props.nearBy);\n  }\n\n  const propsStyle = useSpring({\n    from: { opacity: 0, transform: \"translateY(40%)\" },\n    to: { opacity: 1, transform: \"translateY(0)\" },\n    reset: true\n  });\n\n  const collapse = ( e ) => {\n    e.preventDefault()\n    if ( DEBUG ) console.log(\"List.collapse\", ListRef, e)\n    ListRef.current.classList.toggle('active')\n    ListRef.current.classList.toggle('collapsed')\n\n  }\n  const ListRef = useRef( )\n  const listMessage = props.message? props.message:\"Filtered companies\"\n  const companiesList = (\n    <div id={\"list\"}>\n      <h4 className=\"message\" onClick={collapse}> {props.nearBy.length?props.nearBy.length:''} {listMessage} \n        <button className=\"collapse-btn\" > <span></span> </button>\n      </h4>\n\n      <ul>\n        {props.nearBy.map((company, i) => {\n          var color = { 'color': `${VistaColors.verticals[company.industry_vertical]}` }\n          if(company.name === 'Vista') return null\n          return (\n            <li key={i} style={color}>\n              <animated.div style={propsStyle}>\n                <button style={props} className={'btn'} onClick={selected} data-id={company.id}>\n                  <h6> {company.industry_vertical}</h6>\n                  <h4 dangerouslySetInnerHTML={{__html:company.name}} />\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 60 60\">\n                    <defs><style>{`\n                          .circle-${i} {\n                            stroke:${VistaColors.verticals[company.industry_vertical]};\n                          }\n                          .cls-${i} {\n                            fill: ${VistaColors.verticals[company.industry_vertical]};\n                          }`}\n                    </style></defs>\n                    <path id=\"Path_542\" className={`cls-${i}`} d=\"M30.1,9l-3.5,3.5l13.7,13.7H10.4v4.9h29.9L26.6,44.9l3.5,3.5l19.7-19.7L30.1,9z\" />\n                    <circle className={`circle-${i}`} cx=\"30.1\" cy=\"28.7\" r=\"27\" />\n                  </svg>\n                </button>\n              </animated.div>\n            </li>\n          )\n        })}\n      </ul>\n    </div>\n  )\n  \n  return (\n    <div id={\"list-wrapper\"} className={`${props.className} ${props.nearBy.length?' active':' collapsed'}`} ref={ListRef}>\n      {companiesList}\n    </div>\n  )\n};\n\nexport default List","import React from 'react'\nimport './main.scss'\nconst DEBUG = !true\n// [Function Components] (https://reactjs.org/tutorial/tutorial.html#function-components)\nconst Instructions = ( props ) =>{\n  const iconDesktop = (<img alt=\"back home button\" src={`${window.location.protocol}//${window.location.hostname}/data/assets/Instructions_desktop.svg`}/>)\n  const iconMobile = (<img alt=\"back home button\" src={`${window.location.protocol}//${window.location.hostname}/data/assets/Instructions_mobile.svg`}/>)\n  \n  const handleClick = ( e ) => {    \n    if ( DEBUG ) console.log( e.currentTarget, e.target )\n    if (e.target.nodeName !== \"BUTTON\"){\n      e.preventDefault()\n      e.stopPropagation()\n    }\n  }\n  return(\n    <div id=\"instructions-wrapper\" className={props.className} onClick={handleClick}>\n      <div id=\"instructions\">\n        <h4> { props.title }</h4>\n        <p>\n        { props.copy }\n        </p>\n        <div className=\"icons\">\n        { window.BrowserDetect.mobile ? iconMobile : iconDesktop }\n        <button >Let's go</button>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default Instructions","import React, { useState } from 'react'\nimport {useSpring, animated} from 'react-spring'\n\nimport './main.scss'\n\nconst DEBUG = !true\n\nconst Disclosure = ( props ) => {\n\n  let toggle = props.showCopy\n  \n  const [className, setClassName] = useState(toggle? 'copy':'copy disable' )\n\n  const [propsStyles, setPropsStyles, stop] = useSpring(() => ({opacity: toggle ? 1 : 0}))\n\n\n  const open = (e) => {\n    e.preventDefault()\n    e.stopPropagation()\n    \n    setClassName(\"copy\")\n    setPropsStyles({opacity: 1 })\n    \n  }\n\n  const close = (e) => {\n    e.preventDefault()\n    e.stopPropagation()\n    setClassName(\"copy disable\")\n    setPropsStyles({opacity: 0 })\n  }\n\n  const ignore = (e) => {\n    e.preventDefault()\n    e.stopPropagation()\n  }\n\n  const disclosure = (\n    <animated.div style={propsStyles} className={className} onClick={ignore}>\n    <button className=\"close\" onClick={close} ><div className=\"hit-area\"/></button>\n    <div className=\"center\">\n      <h3> Disclosure </h3>\n      {props.copy}\n      </div>\n    </animated.div>\n\n  )\n\n  if ( DEBUG ) console.log(\"Disclosure\")\n  return (\n    <div id=\"disclosure\" className={props.className}>\n      <button className=\"open-button\" onClick={open}>\n        DISCLOSURE\n        </button>\n      {disclosure}\n      \n    </div>\n  )\n\n}\n\nexport default Disclosure\n\n","import React, { Component } from \"react\"\nimport ReactDOM from \"react-dom\"\nimport axios from \"axios\"\nimport { Spring, config } from \"react-spring/renderprops\"\nimport BrowserDetect from 'browser-detect'\n\n// Components\n\nimport Globe from './components/Globe'\nimport Filter from './components/Filter'\nimport Company from './components/Company'\nimport List from './components/List'\nimport Instructions from './components/Instructions'\nimport Disclosure from './components/Disclosure'\nimport Colors from './components/Colors'\n\n\n// styles\n\nimport './styles/style.scss'\n// import { bigIntLiteral } from \"@babel/types\";\n\n\n\nconst DEBUG = !true\n\nlet styleColors = {}\n\nObject.entries(Colors).forEach(level => {\n  Object.entries(level[1]).forEach(color => {\n    styleColors[`--${level[0]}-${color[0].toLowerCase().replace(/ /g, \"-\").replace(/,/g, \"\").replace(/&/g, \"n\")}`] = color[1]\n  })\n})\n\nwindow.BrowserDetect = BrowserDetect()\n\nclass App extends Component {\n\n  constructor(props) {\n\n    super(props)\n    this.helpTimerDuration = 400000\n    this.state = {\n      activeGroup: 'All',\n      activeVertical: 'All',\n      companiesByFilter: [],\n      allCompaniesInCircle: [],\n      filteredCompaniesInCircle: [],\n      filterMessage: \"No Companies near by\",\n      selectedCompany: null,\n      showHelpBlock: true,\n      fullscreen: false,\n    }\n    this.globeActive = true\n\n    // Initialize the originalCompanies and industryVerticals arrays\n    this.originalCompanies = [];\n    this.industryVerticals = ['All']; // Giving this 'All' as a way to display all companies\n  }\n\n  componentDidMount() {\n    this.fetchCompanies();\n    \n  }\n  fetchCompanies() {\n    const URL = `http://${window.location.hostname}/wp-json/globeInteractive/v1/all`\n    const devURL = `http://${window.location.hostname}:3000/cashed_campany_data.json`\n    // makes call to the wordpress REST api\n    axios.get(devURL).then(companies => {\n      // keep a copy of the original data so we can always restore it\n      this.originalCompanies = companies.data\n      // download(JSON.stringify(companies.data), `cashed_campany_data.json`, 'text/plain');\n      // Create a list of all of the unique industry verticals\n      this.originalCompanies.map((company) => {\n        let verticalName = company.industry_vertical;\n        if (this.industryVerticals.indexOf(verticalName) === -1) {\n          this.industryVerticals.push(verticalName);\n        }\n      })\n      // remove vista\n      let vistIndx = null; \n      this.originalCompanies.forEach((el, i)=>{\n        if(el.name === \"Vista\") vistIndx = i \n        \n      })\n      this.originalCompanies.splice(vistIndx,1)\n      // assign it to state\n      this.setState({ companiesByFilter: companies.data, selectedCompany: null });\n      // this.setState({ companiesByFilter: [companies.data.find( c => c.name === \"Vista\")], selectedCompany: null }); \n      if (DEBUG) console.log(`App:fetchCompanies`, this.state);\n    })\n\n  }\n  /**\n  *  Filter\n  *\n  */\n  filterByGroup(group) {\n    const searchGroup = this.state.filteredCompaniesInCircle.length?this.state.filteredCompaniesInCircle:this.originalCompanies\n    const filteredCompanies = [...searchGroup].filter(company => {\n      const isInGroup = (company.group === group) || (group === 'All');\n      const isInVertical = (company.industry_vertical === this.state.activeVertical) || (this.state.activeVertical === 'All')\n      return (isInGroup && isInVertical);\n    })\n    \n    this.setState({ activeGroup: group, companiesByFilter: filteredCompanies ,  filterMessage: null, filteredCompaniesInCircle:filteredCompanies })\n  }\n\n  filterByVertical(vertical) {\n    const searchGroup = this.state.filteredCompaniesInCircle.length?this.state.filteredCompaniesInCircle:this.originalCompanies\n    const filteredCompanies = [...searchGroup].filter(company => {\n      const isInGroup = (company.group === this.state.activeGroup) || (this.state.activeGroup === 'All')\n      const isInVertical = (company.industry_vertical === vertical) || (vertical === 'All')\n      return (isInGroup && isInVertical);\n    })\n    \n    \n    this.setState({ activeVertical: vertical, companiesByFilter: filteredCompanies, filterMessage: null, filteredCompaniesInCircle:filteredCompanies })\n  }\n\n  filterByIDs( ids , filterMessage) {\n    let { allCompaniesInCircle } = this.state;\n    if (ids) {\n      allCompaniesInCircle = ids;\n    }\n    // debugger;\n    const filteredCircledCompanies = [...this.state.companiesByFilter].filter(company => {\n      const found = allCompaniesInCircle.find(id => {\n        return company.id == id // comparison operator must be type-converting. ie ==\n      })\n      return found;\n    })\n\n    let haveCompaniesChanged = false;\n    \n    // compare Last array against Current Array to see if they have changed\n    if ( this.state.filteredCompaniesInCircle.length !== filteredCircledCompanies.length\n      || this.state.filterMessage !== filterMessage){\n      haveCompaniesChanged = true;\n    }\n    else {\n      for (let i = filteredCircledCompanies.length; i--;) {\n        if (this.state.filteredCompaniesInCircle[i] !== filteredCircledCompanies[i]) {\n          haveCompaniesChanged = true;\n          break;\n        }\n      }\n    }\n\n    if (haveCompaniesChanged && ids) {\n      this.setState({ filteredCompaniesInCircle: filteredCircledCompanies, allCompaniesInCircle: ids, filterMessage: filterMessage});\n    }\n    \n  }\n\n\n\n\n  /**\n  *  SelectedCompany\n  *\n  */\n  setSelectedCompany(id) {\n    \n    let foundCompany = this.state.filteredCompaniesInCircle.find( company => {\n      return company.id == id // comparison operator must be type-converting. ie ==\n    })\n\n    this.globeActive = foundCompany ? false : true\n    this.setState({ selectedCompany: foundCompany })\n    if (DEBUG) console.log(`\\nApp.setSelectedCompany`, this.state, \"\\n\", foundCompany)\n  }\n\n\n\n\n  /**\n   *  Instructions\n   *\n    */\n  resetHelpTimer() {\n\n    const shouldReset = this.state.showHelpBlock\n    if ( shouldReset ) {\n      this.setState({ showHelpBlock: false, fullscreen: true })\n      var resizeEvent = window.document.createEvent('UIEvents'); \n      resizeEvent.initUIEvent('resize', true, false, window, 0); \n      window.dispatchEvent(resizeEvent);\n      // clear the last timeout to prevent accumulation a shit load of timeouts\n    }\n\n    window.clearTimeout(this.helpTimer)\n\n    this.helpTimer = window.setTimeout(() => {\n      // console.log(\"App.resetHelpTimer resetting. \")\n      // if we cross the treshold of inactive time reset the state instruction\n      // NOTE we also need to hide list and reset other variables at this point\n      this.setState({ showHelpBlock: true, fullscreen: false })\n      var resizeEvent = window.document.createEvent('UIEvents');\n      resizeEvent.initUIEvent('resize', true, false, window, 0); \n      window.dispatchEvent(resizeEvent);\n    }, this.helpTimerDuration)\n\n  }\n\n  getSelectedCompany() {\n    if (DEBUG) console.log(`App.getSelectedCompany`, this.state.selectedCompany)\n\n    const currentCompanyIndex = this.state.filteredCompaniesInCircle.indexOf(this.state.selectedCompany);\n\n    if (this.state.selectedCompany) {\n      return (\n        <Company\n          selected={this.state.selectedCompany}\n          selectedCompanyIndex={currentCompanyIndex}\n          setSelectedCompany={this.setSelectedCompany.bind(this)}\n          companies={this.state.filteredCompaniesInCircle} />\n      )\n    }\n    else {\n      return null\n    }\n  }\n\n  render() {\n    const { showHelpBlock, companiesByFilter, filteredCompaniesInCircle, filterMessage, fullscreen } = this.state;\n    \n    // if(window.BrowserDetect.mobile && !showHelpBlock) fullscreen = true\n    if ( DEBUG ) console.log(\"App.render\")\n    return (\n      <section \n        className={`${this.props.className} ${fullscreen?'fullscreen':''}`}\n        onClick={this.resetHelpTimer.bind(this)} style={styleColors}>\n        <button className='fullscreen-btn' onClick={()=>{this.setState({fullscreen:!fullscreen})} } >\n          {fullscreen?\n          <img src={`${window.location.protocol}//${window.location.hostname}/data/assets/exit-fullscreen.svg`} alt=\"exit-fullscreen\" />:\n          <img src={`${window.location.protocol}//${window.location.hostname}/data/assets/enter-fullscreen.svg`} alt=\"enter-fullscreen\" />\n          }\n          \n        </button>\n        <Instructions\n          className={`${showHelpBlock ? 'show-component' : 'hide-component'}`}\n          title={window.globe_interactive.instructions_title} copy={window.globe_interactive.instructions_copy} />\n        <Disclosure\n          className={`${showHelpBlock ? 'show-component' : 'hide-component'}`}\n          showCopy={false} copy={window.globe_interactive.disclosures} />\n\n        <Filter\n          className={`${!showHelpBlock ? 'show-component' : 'hide-component'}`}\n          industryVerticals={this.industryVerticals}\n          updateByVertical={this.filterByVertical.bind(this)}\n          updateByGroup={this.filterByGroup.bind(this)} />\n        < Globe\n          className={`${!showHelpBlock ? 'show-component' : 'hide-component'}`}\n          companies={companiesByFilter}\n          updateByIDs={this.filterByIDs.bind(this)} active={this.globeActive} />\n        <List\n          className={`${!showHelpBlock ? 'show-component' : 'hide-component'}`}\n          nearBy={filteredCompaniesInCircle}\n          message={filterMessage}\n          setSelectedCompany={this.setSelectedCompany.bind(this)} />\n\n        {this.getSelectedCompany()}\n      </section>\n    )\n  }\n\n}\n\nReactDOM.render(<App id=\"globe-interactive\" className={`globe-interactive ${window.BrowserDetect.mobile?'mobile': 'desktop'}`} />, document.getElementById(\"app\"))\n/*\n\n*/\n\n\nlet download = (content, fileName, contentType) => {\n  var a = document.createElement(\"a\");\n  var file = new Blob([content], {type: contentType});\n  a.href = URL.createObjectURL(file);\n  a.download = fileName;\n  a.click();\n}"],"sourceRoot":""}